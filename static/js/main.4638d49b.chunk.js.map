{"version":3,"sources":["components/Navigator.js","utils.js","sparql.js","network.js","components/VirtualizedTable.js","components/FragmentsTable.js","components/FragmentInstancesTable.js","components/VocabSelector.js","components/ClassFragmentsPage.js","components/CodeListsTable.js","components/CodeListInstancesTable.js","components/VOWL.js","components/CodeListsPage.js","components/PrefixesTable.js","components/PrefixesPage.js","components/Header.js","components/Paperbase.js","components/App.js","serviceWorker.js","index.js"],"names":["categories","id","children","icon","react_default","a","createElement","SettingsInputComponent_default","active","withStyles","theme","categoryHeader","paddingTop","spacing","paddingBottom","categoryHeaderPrimary","color","palette","common","white","item","&:hover,&:focus","backgroundColor","itemCategory","boxShadow","firebase","fontSize","itemActiveItem","itemPrimary","itemIcon","minWidth","marginRight","divider","marginTop","props","classes","other","Object","objectWithoutProperties","Drawer","assign","variant","List","disablePadding","ListItem","className","clsx","ListItemIcon","Home_default","ListItemText","primary","map","_ref","Fragment","key","_ref2","childId","button","Divider","debounce","fn","time","timeout","_this","this","_arguments","arguments","clearTimeout","setTimeout","apply","shortenIri","iri","prefixes","keys","window","cached","reversePrefixes","candidatePrefixes","i","length","prefix","startsWith","push","concat","slice","createIriLink","test","Link","href","target","rel","createLink","downloadFile","filename","text","type","element","document","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","arrayMove","arr","oldIndex","newIndex","k","undefined","splice","getEndpointUrl","vocab","includes","vann","voaf","rdfs","owl","skos","rdf","dcterms","dc","dcmit","PREFIXES","join","getQueryVocabStats","getQueryFragmentInstancesCount","fragment","p","value","s","o","getQueryFragmentInstances","getQuerySchemaFragments","vocabIri","getQueryClassInstanceCounts","getQueryCodeListInstances","codeListIri","getQueryCodeListStructure","getQueryCodeListConstruct","vocabPrefixHash","vocabPrefixSlash","endsWith","getDBpediaQueryBroadestConcepts","getDBpediaQueryCodeListMembers","getDBpediaQueryCodeListStructure","getDBpediaQueryCodeListConstruct","axiosConfig","headers","accept","accept-language","content-type","fetchVocabs","reload","vocabs","bluebird","resolve","res","payload","axios","post","then","resp","data","results","bindings","filter","v","findIndex","t","localStorage","setItem","JSON","stringify","Date","toISOString","MuiVirtualizedTable","getRowClassName","index","_this$props","onRowClick","tableRow","flexContainer","defineProperty","tableRowHover","cellRenderer","cellData","columnIndex","_this$props2","columns","rowHeight","TableCell","component","tableCell","noClick","height","align","numeric","headerRenderer","_ref3","label","_this$props3","headerHeight","_this2","_this$props4","tableProps","es","_ref4","width","size","rowClassName","_ref5","dataKey","headerProps","objectSpread","React","PureComponent","defaultProps","alignItems","boxSizing","cursor","&:hover","grey","flex","tableHeadStyle","position","top","fontWeight","head","headLast","fragmentButton","padding","justifyContent","fragments","showInstances","showOnlyFullFragments","vocabIsSelected","mRows","_fragments$key","_fragments$key2","CircularProgress","Button","onClick","Visibility_default","Paper","VirtualizedTable","rowCount","rowGetter","flexGrow","Typography","head1","head2","fragmentInstancesLoading","fragmentInstances","classFragment","fi","selectStyles","option","styles","isDisabled","isFocused","isSelected","textAlign","VocabSelector","state","networkError","selectOptions","selectedOption","loading","componentWillMount","iris","forEach","binding","vocabLabels","nClass","nIns","setState","onLoad","catch","err","handleNetworkError","handleSelectChange","onVocabSelected","closeModal","render","AppBar","searchBar","elevation","Toolbar","Grid","container","Search_default","block","FormControl","formControl","react_select_esm","TextFieldProps","placeholder","options","onChange","submitButton","onShowSparql","disabled","submitButtonContent","onReloadClick","Refresh_default","Dialog","onClose","open","DialogTitle","DialogContent","DialogContentText","DialogActions","Component","ClassFragmentsPage","selectedVocabOption","sparqlPreview","getItem","fetchClassFragments","handleInputChange","name","e","checked","sd","od","uuid","uuidv4","fetchFragmentInstances","fragmentKeys","fragmentKeyGroups","chunk","each","fkg","counts","delay","n","newFragments","countKey","showSparqlPreview","query","_this$state$fragments","closeSparqlModal","closeInstancesModal","controls","FormControlLabel","control","Switch","trim","paper","components_VocabSelector","root","components_FragmentsTable","fullWidth","maxWidth","dialogTitle","Close_default","components_FragmentInstancesTable","react_codemirror2","mode","lineNumbers","readOnly","margin","borderBottom","codeBlock","border","codeLists","_codeLists$key","d","c","ni","codeListInstances","codeList","cli","sc","scs","skosConcept","skosConceptScheme","parseToVOWLSpec","nodes","links","linkedEntities","cn","i1","i1n","cp","values","i2","i2n","nodeIndexes","_nodes$key","fullName","uri","link","source","valueTo","uriTo","info","title","url","version","authors","description","drawGraph","linkDistanceClassSlider","linkDistanceClassLabel","linkDistanceLiteralLabel","linkDistanceLiteralSlider","force","svg","linkPath","cardinalities","node","json","lastFocusedNode","d3","GRAPH_WIDTH","innerWidth","GRAPH_HEIGHT","innerHeight","DEFAULT_VISIBLE_LINKDISTANCE","visibleLinkDistance","visibleLiteralLinkDistance","LITERAL_HEIGHT","LITERAL_WIDTH","CLASS_RADIUS","THING_RADIUS","SPECIAL_OPERATIONS_RADIUS","LABEL_HEIGHT","LABEL_WIDTH","SPACE_BETWEEN_SPANS","curveFunction","line","x","y","interpolate","loopFunction","tension","zoom","behavior","scaleExtent","on","attr","event","translate","scale","tick","l","loopShiftAngle","selfLinkCount","loopAngle","Math","min","arcFrom","calculateRadian","selfLinkIndex","arcTo","x1","cos","radius","y1","sin","x2","y2","fixPoint1","fixPoint2","dx","dy","curvePoint","calculateSelfLinkPath","distance","level","floor","multiLinkIndex","multiLinkCount","oddConstant","calculateMultiLinkDistance","cx","cy","calculateNormalVector","calculateCurvePoint","calculateIntersection","selectAll","pos","select","classed","group","midX","midY","inverse","String","prototype","textStyle","append","w","getElementById","offsetWidth","remove","truncate","maxLength","isNaN","textWidth","ratio","textLength","substring","isSpecialLink","resetGraph","property","changeDistance","initialize","maxTextWidth","sameLinks","otherLink","selfLinks","refreshSlider","additionalDistance","innerDistance","abs","rectY","sqrt","pow","rectX","calculateLinkDistance","getLinkDistance","html","charge","getCharge","start","centerGraph","interval","setInterval","clearInterval","nodeCharge","literalCharge","nx","ny","angle","arc","PI","getMarkerId","addMarker","defs","addLabelRect","direction","propertyTo","propertyFrom","linkData","sort","b","labelMouseEnter","highlightSubproperties","labelMouseLeave","addLabel","labelText","classConst","typeTo","typeFrom","valueFrom","toString","addLabelText","anyProperty","trimmedPropertyText","substr","addPropertyToLabel","subProperty","equivPropTo","subPropFrom","addSubPropertyLabel","addDisjointLabel","addCardinality","cardTo","cardFrom","addTextline","word","additionalClass","addSubTextNode","addTextBlock","getKindOfElement","theParent","parentNode","toggleNodeFocus","firstChildElement","toggleLabelFocus","labelToHigh","rectOfNode","notHasFocusClass","datum","focusOnElement","lastFocusedElement","currentNode","kindOfLastElement","hideInfoField","kindOfThisElement","getNodeInfo","setUriLabel","equivUriSpan","equivUriSpanParent","equivalentClasses","listUriLabels","getTypeNode","disjointNodes","disjointNodesParent","disjoints","appendUriLabel","getTypeLink","getLinkInfo","hideNodeInfoFields","uriFrom","subproperties","subpropertiesTo","subpropertiesFrom","graphTag","graphContainerElement","graphContainer","call","resetOption","sliderOption","distanceSlider","resetButton","slidDiv","layout","gravity","linkStrength","enter","needsLabel","drag","sourceEvent","stopPropagation","fixed","px","py","resume","linkIDs","entry","iriParts","split","iriPart","addClass","addThing","equivNames","equivNamesString","rePositiony","addEquivalentClass","addDeprecatedClass","addExternalClass","addLiteral","addDatatype","addRDFSClass","addRDFSResource","symbol","addIntersectionClass","addUnionClass","addComplementClass","console","log","draw","CodeListsPage","vocabsReady","ontologyListLoading","codeListsLoading","codeListInstanceGraphNodes","codeListInstancesGraphLoading","fetchCodeLists","uniqueCodeLists","properties","instances","parseFloat","records","queries","_this$state","codeListInstancesLoading","closeGraphModal","handleDownloadCodeList","downloading","_this$state2","fromVocab","ac","parse","fileName","replace","handleLoadGraph","_this$state3","showCodeListSparqlPreview","remountVocabSelector","_this$state4","_this$state5","submitButtonContentWide","components_CodeListsTable","CloudDownload_default","Palette_default","components_CodeListInstancesTable","preview","textIndent","overflow","PrefixesTable","rows","renderedPrefixes","renderedPrefix","PrefixesPage","searchValue","updateList","toLowerCase","TextField","secondaryBar","zIndex","menuButton","marginLeft","iconButtonAvatar","textDecoration","borderColor","onDrawerToggle","onTabSwitch","tabIndex","Hidden","smUp","IconButton","aria-label","Menu_default","xs","Tooltip","Notifications_default","Avatar","avatar","src","alt","Help_default","Tabs","textColor","Tab","createMuiTheme","typography","h5","letterSpacing","light","main","dark","shape","borderRadius","overrides","MuiDrawer","MuiButton","textTransform","contained","&:active","MuiTabs","indicator","borderTopLeftRadius","borderTopRightRadius","MuiTab","breakpoints","up","MuiIconButton","MuiTooltip","tooltip","MuiDivider","MuiListItemText","fontWeightMedium","MuiListItemIcon","& svg","MuiAvatar","disableRipple","mixins","toolbar","minHeight","drawer","flexShrink","appPage","flexDirection","mainPage","background","Paperbase","mobileOpen","handleDrawerToggle","handleTabSwitch","renderPage","components_CodeListsPage","components_ClassFragmentsPage","components_PrefixesPage","ThemeProvider","CssBaseline","implementation","components_Navigator","PaperProps","xsDown","components_Header","require","App","get","components_Paperbase","Boolean","location","hostname","match","cachedVocabs","cachedVocabsDate","ReactDOM","components_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4638d49b.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport SettingsInputComponentIcon from '@material-ui/icons/SettingsInputComponent';\r\n\r\nconst categories = [\r\n  {\r\n    id: 'Develop',\r\n    children: [\r\n      { id: 'Code List Analyzer', icon: <SettingsInputComponentIcon />, active: true },\r\n    ],\r\n  }\r\n];\r\n\r\nconst styles = theme => ({\r\n  categoryHeader: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  categoryHeaderPrimary: {\r\n    color: theme.palette.common.white,\r\n  },\r\n  item: {\r\n    paddingTop: 1,\r\n    paddingBottom: 1,\r\n    color: 'rgba(255, 255, 255, 0.7)',\r\n    '&:hover,&:focus': {\r\n      backgroundColor: 'rgba(255, 255, 255, 0.08)',\r\n    },\r\n  },\r\n  itemCategory: {\r\n    backgroundColor: '#232f3e',\r\n    boxShadow: '0 -1px 0 #404854 inset',\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  firebase: {\r\n    fontSize: 24,\r\n    color: theme.palette.common.white,\r\n  },\r\n  itemActiveItem: {\r\n    color: '#4fc3f7',\r\n  },\r\n  itemPrimary: {\r\n    fontSize: 'inherit',\r\n  },\r\n  itemIcon: {\r\n    minWidth: 'auto',\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  divider: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n});\r\n\r\nfunction Navigator(props) {\r\n  const { classes, ...other } = props;\r\n\r\n  return (\r\n    <Drawer variant=\"permanent\" {...other}>\r\n      <List disablePadding>\r\n        <ListItem className={clsx(classes.firebase, classes.item, classes.itemCategory)}>\r\n          IGA HYBRID\r\n        </ListItem>\r\n        <ListItem className={clsx(classes.item, classes.itemCategory)}>\r\n          <ListItemIcon className={classes.itemIcon}>\r\n            <HomeIcon />\r\n          </ListItemIcon>\r\n          <ListItemText\r\n            classes={{\r\n              primary: classes.itemPrimary,\r\n            }}\r\n          >\r\n            Project Overview\r\n          </ListItemText>\r\n        </ListItem>\r\n        {categories.map(({ id, children }) => (\r\n          <React.Fragment key={id}>\r\n            <ListItem className={classes.categoryHeader}>\r\n              <ListItemText\r\n                classes={{\r\n                  primary: classes.categoryHeaderPrimary,\r\n                }}\r\n              >\r\n                {id}\r\n              </ListItemText>\r\n            </ListItem>\r\n            {children.map(({ id: childId, icon, active }) => (\r\n              <ListItem\r\n                key={childId}\r\n                button\r\n                className={clsx(classes.item, active && classes.itemActiveItem)}\r\n              >\r\n                <ListItemIcon className={classes.itemIcon}>{icon}</ListItemIcon>\r\n                <ListItemText\r\n                  classes={{\r\n                    primary: classes.itemPrimary,\r\n                  }}\r\n                >\r\n                  {childId}\r\n                </ListItemText>\r\n              </ListItem>\r\n            ))}\r\n            <Divider className={classes.divider} />\r\n          </React.Fragment>\r\n        ))}\r\n      </List>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nNavigator.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Navigator);","import React from 'react';\r\nimport Link from '@material-ui/core/Link';\r\n\r\nexport const debounce = (fn, time) => {\r\n  let timeout;\r\n  return function () {\r\n    const functionCall = () => fn.apply(this, arguments);\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(functionCall, time);\r\n  }\r\n};\r\n\r\nexport const shortenIri = (iri) => {\r\n  const prefixes = Object.keys(window.cached.reversePrefixes);\r\n  const candidatePrefixes = [];\r\n  for (let i = 0; i < prefixes.length; i++) {\r\n    let prefix = prefixes[i];\r\n    if (iri.startsWith(prefix)) {\r\n      candidatePrefixes.push(prefix);\r\n    }\r\n  }\r\n  for (let i = 0; i < candidatePrefixes.length; i++) {\r\n    let prefix = candidatePrefixes[i];\r\n    if (iri.length === prefix.length) {\r\n      return window.cached.reversePrefixes[prefix];\r\n    }\r\n  }\r\n  for (let i = 0; i < candidatePrefixes.length; i++) {\r\n    let prefix = candidatePrefixes[i];\r\n    if (iri.startsWith(prefix)) {\r\n      return `${window.cached.reversePrefixes[prefix]}:${iri.slice(prefix.length)}`;\r\n    }\r\n  }\r\n  return iri;\r\n};\r\n\r\nexport const createIriLink = (iri) => {\r\n  if (!/^https?:\\/\\//.test(iri)) {\r\n    return iri;\r\n  }\r\n  return <Link href={iri} target=\"_blank\" rel=\"noopener noreferrer\">{shortenIri(iri)}</Link>;\r\n};\r\n\r\nexport const createLink = (iri) => {\r\n  return <Link href={iri} target=\"_blank\" rel=\"noopener noreferrer\">{iri}</Link>;\r\n};\r\n\r\nexport const downloadFile = (filename, text, type) => {\r\n  var element = document.createElement('a');\r\n  element.setAttribute('href', `data:text/${type || 'plain'};charset=utf-8,` + encodeURIComponent(text));\r\n  element.setAttribute('download', filename);\r\n  element.style.display = 'none';\r\n  document.body.appendChild(element);\r\n  element.click();\r\n  document.body.removeChild(element);\r\n};\r\n\r\nexport const arrayMove = (arr, oldIndex, newIndex) => {\r\n  if (newIndex >= arr.length) {\r\n    var k = newIndex - arr.length + 1;\r\n    while (k--) {\r\n      arr.push(undefined);\r\n    }\r\n  }\r\n  arr.splice(newIndex, 0, arr.splice(oldIndex, 1)[0]);\r\n};","import { shortenIri } from './utils';\r\n\r\nexport const getEndpointUrl = (vocab) => {\r\n  const customDataGraphIris = [\r\n    'http://semanticchemistry.github.io/semanticchemistry/ontology/cheminf.owl',\r\n    'http://purl.obolibrary.org/obo/iao.owl',\r\n    'http://purl.obolibrary.org/obo/obi.owl',\r\n    'http://purl.obolibrary.org/obo/chebi.owl',\r\n    'http://purl.obolibrary.org/obo/clo.owl',\r\n    'http://purl.obolibrary.org/obo/go.owl',\r\n    'http://www.bioassayontology.org/bao/bao_complete.owl',\r\n    'http://semanticscience.org/ontology/sio.owl',\r\n    'http://purl.obolibrary.org/obo/pr.owl',\r\n    'http://purl.bioontology.org/ontology/RXNORM/',\r\n    'http://purl.obolibrary.org/obo/ncit.owl',\r\n    'http://purl.bioontology.org/ontology/NCBITAXON/',\r\n    'https://fcp.vse.cz/blazegraphpublic/namespace/biomed',\r\n  ];\r\n  if (customDataGraphIris.includes(vocab)) {\r\n    return 'https://fcp.vse.cz/blazegraphpublic/namespace/biomed/sparql';\r\n  }\r\n  switch (vocab) {\r\n    case 'http://dbpedia.org': return 'https://dbpedia.org/sparql';\r\n    // default: return 'https://lov.linkeddata.es/dataset/lov/sparql';\r\n    // we have our own endpoint so we don't add traffic to LOV\r\n    default: return 'https://fcp.vse.cz/blazegraphpublic/namespace/lov20221023/sparql';\r\n  }\r\n};\r\n\r\nexport const prefixes = {\r\n  vann:     'http://purl.org/vocab/vann/',\r\n  voaf:     'http://purl.org/vocommons/voaf#',\r\n  rdfs:     'http://www.w3.org/2000/01/rdf-schema#',\r\n  owl:      'http://www.w3.org/2002/07/owl#',\r\n  skos:     'http://www.w3.org/2004/02/skos/core#',\r\n  rdf:      'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\r\n  dcterms:  'http://purl.org/dc/terms/',\r\n  dc:       'http://purl.org/dc/elements/1.1/',\r\n  dcmit:    'http://purl.org/dc/dcmitype/',\r\n};\r\n\r\n// export const reversePrefixes = {};\r\n// Object.keys(prefixes).forEach((prefix) => {\r\n//   reversePrefixes[prefixes[prefix]] = prefix;\r\n// });\r\n\r\nexport const PREFIXES = Object.keys(prefixes).map((prefix) => `PREFIX ${prefix}: <${prefixes[prefix]}>`).join('\\n') + '\\n';\r\n\r\nexport const FROMS = ''; /*`\r\n#FROM <http://purl.org/dc/terms/>\r\n#FROM <http://purl.org/vocab/vann/>\r\n#FROM <http://www.w3.org/2004/02/skos/core>\r\n#FROM <http://purl.org/dc/elements/1.1/>\r\n#FROM <http://creativecommons.org/ns>\r\n#FROM <http://xmlns.com/foaf/0.1/>\r\n#FROM <http://schema.org/>\r\n#FROM <http://www.w3.org/ns/prov#>\r\n#FROM <http://www.w3.org/2002/07/owl#>\r\n`;*/\r\n//Object.keys(reversePrefixes).map((rp) => `FROM <${rp.slice(0, -1)}>\\nFROM <${rp}>`).join('\\n') + '\\n';\r\n\r\nexport const getQueryVocabs = () => `\r\nSELECT DISTINCT ?vocabPrefix ?vocab {\r\n \tGRAPH <https://lov.linkeddata.es/dataset/lov> {\r\n \t \t?vocab a voaf:Vocabulary.\r\n \t \t?vocab vann:preferredNamespacePrefix ?vocabPrefix.\r\n  }\r\n}\r\nORDER BY ?vocabPrefix\r\n`;\r\n\r\nexport const getQueryVocabStats = () => `\r\nSELECT DISTINCT ?vocab\r\n                (GROUP_CONCAT(DISTINCT ?vp;separator=\" || \") AS ?vocabPrefixes)\r\n                (GROUP_CONCAT(DISTINCT ?vl;separator=\" || \") AS ?vocabLabels)\r\n                (COUNT (DISTINCT ?c)  AS ?nClass)\r\n                #(COUNT (DISTINCT ?sc) AS ?nSubClass)\r\n                (COUNT (DISTINCT ?i)  AS ?nIns)\r\nWHERE {\r\n  ?vocab a voaf:Vocabulary .\r\n  OPTIONAL { ?vocab vann:preferredNamespacePrefix ?vp }\r\n  OPTIONAL {\r\n    VALUES ?vocabLabelProp {\r\n      rdfs:label dc:title dcterms:title skos:prefLabel\r\n    }\r\n    ?vocab ?vocabLabelProp ?vl .\r\n    FILTER(LANGMATCHES(LANG(?vl), 'en') || LANGMATCHES(LANG(?vl), ''))\r\n  }\r\n  OPTIONAL {\r\n    GRAPH ?vocab {\r\n      VALUES ?class { owl:Class rdfs:Class } .\r\n      ?c a ?class .\r\n      OPTIONAL { ?i a ?c }\r\n      #OPTIONAL { ?sc rdfs:subClassOf ?c }\r\n    }\r\n  }\r\n} \r\nGROUP BY ?vocab\r\nORDER BY DESC(?nIns)\r\n`;\r\n\r\nexport const getQueryFragmentInstancesCount = (fragment) => `\r\nSELECT (COUNT(DISTINCT *) AS ?n)\r\nWHERE {\r\n  BIND(<${fragment.p.value}> AS ?p) .\r\n  ?s a <${fragment.s.value}> .\r\n  ${fragment.o.value.startsWith('http://www.w3.org/2001/XMLSchema#') ? '' : `?o a <${fragment.o.value}> .`}\r\n  ?s ?p ?o .\r\n}\r\n`;\r\n\r\nexport const getQueryFragmentInstances = (fragment) => `\r\nSELECT DISTINCT ?s ?p ?o\r\nWHERE {\r\n  BIND(<${fragment.p.value}> AS ?p) .\r\n  ?s a <${fragment.s.value}> .\r\n  ${fragment.o.value.startsWith('http://www.w3.org/2001/XMLSchema#') ? '' : `?o a <${fragment.o.value}> .`}\r\n  ?s ?p ?o .\r\n}\r\n`;\r\nexport const getQuerySchemaFragments = (vocabIri) => `\r\nSELECT DISTINCT\r\n?s ?sp ?sd ?p ?o ?op ?od\r\n${FROMS}\r\n\r\nFROM <${vocabIri}>\r\nWHERE {\r\n  ?p rdfs:isDefinedBy <${vocabIri}> .\r\n  VALUES ?pt { owl:ObjectProperty owl:DatatypeProperty rdf:Property } .\r\n  ?p a ?pt .\r\n  OPTIONAL {\r\n    ?p rdfs:domain ?s .\r\n    OPTIONAL {\r\n      ?p rdfs:subPropertyOf ?op .\r\n        OPTIONAL { ?op rdfs:range ?od . }\r\n    }\r\n  }\r\n  OPTIONAL {\r\n    ?p rdfs:range ?o .\r\n    OPTIONAL {\r\n      ?p rdfs:subPropertyOf ?sp .\r\n      OPTIONAL { ?sp rdfs:domain ?sd . }\r\n    }\r\n  }\r\n}\r\nORDER BY ?s\r\n`;\r\n\r\nexport const getQueryMetadata = (iri) => `\r\nSELECT ?label ?ontology ?comment ?definition WHERE {\r\n  BIND (<${iri}> AS ?entity).\r\n  ?entity rdfs:label ?label .\r\n  OPTIONAL { ?entity rdfs:isDefinedBy ?ontology }\r\n  OPTIONAL { ?entity rdfs:comment ?comment }\r\n  OPTIONAL { ?entity skos:definition ?definition }\r\n}\r\n`;\r\n\r\nexport const getQueryClassInstanceCounts = (vocabIri) => `\r\nSELECT DISTINCT ?d ?p ?c (COUNT(DISTINCT ?i) AS ?ni)\r\nFROM <${vocabIri}> \r\nWHERE {\r\n  VALUES ?class { owl:Class rdf:Class }\r\n  ?c a ?class .\r\n  #?i a|rdfs:subClassOf ?c .\r\n  ?i a ?c .\r\n  OPTIONAL { \r\n    ?p rdfs:range ?c . \r\n    OPTIONAL { ?p rdfs:domain ?d }\r\n  }\r\n} GROUP BY ?d ?p ?c ORDER BY DESC(?ni)\r\n`;\r\n\r\nexport const getQueryCodeListInstances = (codeListIri, vocabIri) => `\r\nSELECT DISTINCT ?i ?sc ?scs #?l\r\nFROM <${vocabIri}> \r\nWHERE {\r\n  #OPTIONAL {\r\n  #  VALUES ?lp { rdfs:label dc:title dcterms:title skos:prefLabel }\r\n  #  ?i ?lp ?l . \r\n  #}\r\n  #?i a|rdfs:subClassOf <${codeListIri}> .\r\n  ?i a <${codeListIri}> .\r\n  OPTIONAL {\r\n    BIND(skos:Concept AS ?sc) .\r\n    ?i a ?sc .\r\n  }\r\n  OPTIONAL {\r\n    ?i skos:inScheme ?scs .\r\n    ?scs a skos:ConceptScheme\r\n  }\r\n}\r\nORDER BY ?i\r\n`;\r\n\r\nexport const getQueryCodeListStructure = (codeListIri, vocabIri) => `\r\nSELECT DISTINCT ?cp ?c ?cn ?i1 ?i1n ?p ?i2 ?i2n\r\n${vocabIri ? FROMS : ''}\r\n${vocabIri ? `FROM <${vocabIri}>` : ''}\r\nWHERE {\r\n  VALUES ?cp { rdf:type }# rdfs:subClassOf\r\n  BIND(<${codeListIri}> AS ?c) .\r\n  ?i1 ?cp ?c .\r\n  VALUES ?lp { rdfs:label dc:title dcterms:title skos:prefLabel }\r\n  OPTIONAL { ?c ?lp ?cn . FILTER(LANGMATCHES(LANG(?cn), 'en')) }\r\n  OPTIONAL { ?i1 ?lp ?i1n . FILTER(LANGMATCHES(LANG(?i1n), 'en'))}\r\n  OPTIONAL {\r\n    ?i2 ?cp ?c .\r\n    ?i1 ?p ?i2 .\r\n    OPTIONAL { ?i2 ?lp ?i2n . FILTER(LANGMATCHES(LANG(?i2n), 'en')) }\r\n  }\r\n}\r\nORDER BY ?i1\r\n`;\r\n\r\nexport const getQueryCodeListConstruct = (codeListIri, vocabIri) => {\r\n  let vocabPrefixHash = '';\r\n  let vocabPrefixSlash = '';\r\n  if (!vocabIri.endsWith('#') && !vocabIri.endsWith('/')) {\r\n    vocabPrefixHash = `PREFIX ${shortenIri(`${vocabIri}#`)}: <${vocabIri}#>`;\r\n    vocabPrefixSlash = `PREFIX ${shortenIri(`${vocabIri}/`)}: <${vocabIri}/>`;\r\n  } else {\r\n    if (vocabIri.endsWith('#')) {\r\n      vocabPrefixHash = `PREFIX ${shortenIri(vocabIri)}: <${vocabIri}>`;\r\n    } else if (!vocabIri.endsWith('/')) {\r\n      vocabPrefixHash = `PREFIX ${shortenIri(`${vocabIri}#`)}: <${vocabIri}#>`;\r\n    }\r\n    if (vocabIri.endsWith('/')) {\r\n      vocabPrefixSlash = `PREFIX ${shortenIri(vocabIri)}: <${vocabIri}>`;\r\n    } else if (!vocabIri.endsWith('#')) {\r\n      vocabPrefixSlash = `PREFIX ${shortenIri(`${vocabIri}/`)}: <${vocabIri}/>`;\r\n    }\r\n  }\r\n  if (vocabPrefixHash.startsWith('PREFIX http')) {\r\n    vocabPrefixHash = '';\r\n  }\r\n  if (vocabPrefixSlash.startsWith('PREFIX http')) {\r\n    vocabPrefixSlash = '';\r\n  }\r\n  return (\r\n`\r\n${vocabPrefixHash}\r\n${vocabPrefixSlash}\r\nCONSTRUCT { \r\n  ?c a owl:Class .\r\n  ?c rdfs:label ?cn .\r\n  ?cp a owl:ObjectProperty .\r\n  ?cp rdfs:range ?c .\r\n  ?cp rdfs:label ?cpn .\r\n  ?cp rdfs:domain ?cd .\r\n  ?cd a owl:Class .\r\n  ?cd rdfs:label ?cdn .\r\n  ?i1 ?icr ?c . # WARNING, this predicate is twofold\r\n  ?i1 a ?skosConcept .\r\n  ?i1 rdfs:label ?i1n .\r\n  ?i2 ?icr ?c .\r\n  ?i2 rdfs:label ?i2n .\r\n  ?i1 ?p ?i2 .\r\n}\r\n${vocabIri ? FROMS : ''}\r\n${vocabIri ? `FROM <${vocabIri}>` : ''}\r\nWHERE {\r\n  VALUES ?icr { rdf:type rdfs:subClassOf }\r\n  VALUES ?lp { rdfs:label skos:prefLabel }\r\n  BIND(<${codeListIri}> AS ?c) .\r\n  ?i1 ?irc ?c .\r\n  OPTIONAL { \r\n    ?cp rdfs:range ?c . \r\n    OPTIONAL { \r\n      ?cp rdfs:label ?cpn .\r\n      ?cp rdfs:domain ?cd .\r\n      OPTIONAL { ?cd rdfs:label ?cdn } \r\n    }\r\n  }\r\n  OPTIONAL { BIND(skos:Concept AS ?skosConcept) . ?i1 a ?skosConcept . }\r\n  OPTIONAL { ?c ?lp ?cn . FILTER(LANGMATCHES(LANG(?cn), 'en')) }\r\n  OPTIONAL { ?i1 ?lp ?i1n . FILTER(LANGMATCHES(LANG(?i1n), 'en'))}\r\n  OPTIONAL {\r\n    ?i2 ?icr ?c .\r\n    ?i1 ?p ?i2 .\r\n    OPTIONAL { ?i2 ?lp ?i2n . FILTER(LANGMATCHES(LANG(?i2n), 'en')) }\r\n  }\r\n}\r\nORDER BY ?i1\r\n`);\r\n};\r\n\r\nexport const getDBpediaQueryBroadestConcepts = () => `\r\nSELECT ?c (COUNT(DISTINCT ?i) AS ?n) {\r\n  ?c a skos:Concept .\r\n  FILTER NOT EXISTS {\r\n    ?b a skos:Concept .\r\n    ?c skos:broader ?b .\r\n  }\r\n  ?i skos:broader ?c .\r\n}\r\nGROUP BY ?c\r\n#HAVING (COUNT(DISTINCT ?i) < 20)\r\nORDER BY DESC(?n)\r\n`;\r\n\r\nexport const getDBpediaQueryCodeListMembers = (iri) => `\r\nSELECT DISTINCT ?i ?skosConcept\r\nWHERE {\r\n  ?i skos:broader <${iri}> .\r\n  ?i a ?skosConcept .\r\n}\r\n`;\r\n\r\nexport const getDBpediaQueryCodeListStructure = (codeListIri) => `\r\nSELECT DISTINCT ?c ?cn ?i1 ?i1n ?p ?i2 ?i2n\r\nWHERE {\r\n  VALUES ?lp { rdfs:label }\r\n  BIND(<${codeListIri}> AS ?c) .\r\n  ?i1 skos:broader ?c .\r\n  OPTIONAL { ?c ?lp ?cn . FILTER(LANGMATCHES(LANG(?cn), 'en')) }\r\n  OPTIONAL { ?i1 ?lp ?i1n . FILTER(LANGMATCHES(LANG(?i1n), 'en'))}\r\n  OPTIONAL {\r\n  \t?i2 skos:broader ?c .\r\n    ?i1 ?p ?i2 .\r\n    OPTIONAL { ?i2 ?lp ?i2n . FILTER(LANGMATCHES(LANG(?i2n), 'en')) }\r\n  }\r\n}\r\nORDER BY ?i1\r\n`;\r\nexport const getDBpediaQueryCodeListConstruct = (codeListIri) => `\r\nCONSTRUCT {\r\n  ?c a owl:Class .\r\n  ?c rdfs:label ?cn .\r\n  ?i1 a ?c .\r\n  ?i1 a ?skosConcept .\r\n  ?i1 rdfs:label ?i1n .\r\n  ?i2 a ?c .\r\n  ?i2 rdfs:label ?i2n .\r\n  ?i1 ?p ?i2 .\r\n} \r\nWHERE {\r\n  VALUES ?lp { rdfs:label }\r\n  BIND(<${codeListIri}> AS ?c) .\r\n  ?i1 skos:broader ?c .\r\n  OPTIONAL { ?c ?lp ?cn . FILTER(LANGMATCHES(LANG(?cn), 'en')) }\r\n  OPTIONAL { ?i1 ?lp ?i1n . FILTER(LANGMATCHES(LANG(?i1n), 'en'))}\r\n  OPTIONAL {\r\n  \t?i2 skos:broader ?c .\r\n    ?i1 ?p ?i2 .\r\n    OPTIONAL { ?i2 ?lp ?i2n . FILTER(LANGMATCHES(LANG(?i2n), 'en')) }\r\n  }\r\n}\r\nORDER BY ?i1\r\n`;\r\n\r\n/*\r\nSELECT DISTINCT ?i ?skosConcept\r\nWHERE {\r\n  ?i skos:broader <http://dbpedia.org/resource/Category:Norwegian_people_by_occupation> .\r\n  OPTIONAL {\r\n    BIND(skos:Concept AS ?skosConcept) .\r\n    ?i a ?skosConcept .\r\n  }\r\n}\r\n*/","import axios from 'axios';\r\nimport bluebird from 'bluebird';\r\nimport { getEndpointUrl, PREFIXES, getQueryVocabStats } from './sparql'\r\nexport const axiosConfig = {\r\n  headers: {\r\n    \"accept\": \"application/sparql-results+json,*/*;q=0.9\",\r\n    // \"accept\": \"application/rdf+xml,*/*;q=0.9\",\r\n    \"accept-language\": \"en-US,en;q=0.9\",\r\n    \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n  }\r\n};\r\n\r\nexport const fetchVocabs = (reload) => {\r\n  if (window.cached.vocabs && !reload) {\r\n    return bluebird.resolve(window.cached.vocabs);\r\n  }\r\n  const payload = `query=${PREFIXES}${getQueryVocabStats()}`;\r\n  let res;\r\n  return axios.post(getEndpointUrl(), payload, axiosConfig).then((resp) => {\r\n    res = resp.data;\r\n    // console.log(res.results.bindings.length);\r\n    // remove duplicates\r\n    res.results.bindings = res.results.bindings.filter((v, i, a) => a.findIndex((t) => (t.vocab.value === v.vocab.value)) === i);\r\n    // console.log(res.results.bindings.length);\r\n    // return axios.post(getEndpointUrl('https://fcp.vse.cz/blazegraphpublic/namespace/biomed'), payload, axiosConfig);\r\n  // }).then((resp) => {\r\n  //   res.results.bindings = resp.data.results.bindings.filter((v, i, a) => a.findIndex(t => (t.vocab.value === v.vocab.value)) === i).concat(res.results.bindings);\r\n    window.cached.vocabs = res;\r\n    localStorage.setItem('cached.vocabs', JSON.stringify(res));\r\n    localStorage.setItem('cached.vocabs.date', new Date().toISOString());\r\n    return res;\r\n  });\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport { AutoSizer, Column, Table } from 'react-virtualized';\r\n\r\nconst styles = theme => ({\r\n  flexContainer: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    boxSizing: 'border-box',\r\n  },\r\n  tableRow: {\r\n    cursor: 'pointer',\r\n  },\r\n  tableRowHover: {\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.grey[200],\r\n    },\r\n  },\r\n  tableCell: {\r\n    flex: 1,\r\n  },\r\n  noClick: {\r\n    cursor: 'initial',\r\n  },\r\n});\r\n\r\nclass MuiVirtualizedTable extends React.PureComponent {\r\n  static defaultProps = {\r\n    headerHeight: 48,\r\n    rowHeight: 48,\r\n  };\r\n\r\n  getRowClassName = ({ index }) => {\r\n    const { classes, onRowClick } = this.props;\r\n\r\n    return clsx(classes.tableRow, classes.flexContainer, {\r\n      [classes.tableRowHover]: index !== -1 && onRowClick != null,\r\n    });\r\n  };\r\n\r\n  cellRenderer = ({ cellData, columnIndex }) => {\r\n    const { columns, classes, rowHeight, onRowClick } = this.props;\r\n    return (\r\n      <TableCell\r\n        component=\"div\"\r\n        className={clsx(classes.tableCell, classes.flexContainer, {\r\n          [classes.noClick]: onRowClick == null,\r\n        })}\r\n        variant=\"body\"\r\n        style={{ height: rowHeight }}\r\n        align={(columnIndex != null && columns[columnIndex].numeric) || false ? 'right' : 'left'}\r\n      >\r\n        {cellData}\r\n      </TableCell>\r\n    );\r\n  };\r\n\r\n  headerRenderer = ({ label, columnIndex }) => {\r\n    const { headerHeight, columns, classes } = this.props;\r\n\r\n    return (\r\n      <TableCell\r\n        component=\"div\"\r\n        className={clsx(classes.tableCell, classes.flexContainer, classes.noClick)}\r\n        variant=\"head\"\r\n        style={{ height: headerHeight }}\r\n        align={columns[columnIndex].numeric || false ? 'right' : 'left'}\r\n      >\r\n        <span>{label}</span>\r\n      </TableCell>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { classes, columns, ...tableProps } = this.props;\r\n    return (\r\n      <AutoSizer>\r\n        {({ height, width }) => (\r\n          <Table size=\"small\" height={height} width={width} {...tableProps} rowClassName={this.getRowClassName}>\r\n            {columns.map(({ dataKey, ...other }, index) => {\r\n              return (\r\n                <Column\r\n                  key={dataKey}\r\n                  headerRenderer={headerProps =>\r\n                    this.headerRenderer({\r\n                      ...headerProps,\r\n                      columnIndex: index,\r\n                    })\r\n                  }\r\n                  className={classes.flexContainer}\r\n                  cellRenderer={this.cellRenderer}\r\n                  dataKey={dataKey}\r\n                  {...other}\r\n                />\r\n              );\r\n            })}\r\n          </Table>\r\n        )}\r\n      </AutoSizer>\r\n    );\r\n  }\r\n}\r\n\r\nMuiVirtualizedTable.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  columns: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  headerHeight: PropTypes.number,\r\n  onRowClick: PropTypes.func,\r\n  rowHeight: PropTypes.number,\r\n};\r\n\r\nexport default withStyles(styles)(MuiVirtualizedTable);\r\n","import React from 'react';\r\n// import Table from '@material-ui/core/Table';\r\n// import TableBody from '@material-ui/core/TableBody';\r\n// import TableCell from '@material-ui/core/TableCell';\r\n// import TableHead from '@material-ui/core/TableHead';\r\n// import TableRow from '@material-ui/core/TableRow';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { createIriLink } from '../utils';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport VirtualizedTable from './VirtualizedTable'\r\n\r\nconst tableHeadStyle = {\r\n  backgroundColor: 'white',\r\n  position: 'sticky',\r\n  top: 0,\r\n  fontWeight: 'bold',\r\n};\r\nconst styles = (theme) => ({\r\n  head: tableHeadStyle,\r\n  headLast: {\r\n    ...tableHeadStyle,\r\n    width: 150,\r\n  },\r\n  fragmentButton: {\r\n    padding: '4px 16px',\r\n    width: 32,\r\n    justifyContent: 'flex-end',\r\n  }\r\n});\r\n\r\nconst FragmentsTable = ({ fragments, showInstances, showOnlyFullFragments, vocabIsSelected, classes }) => {\r\n  const mRows = fragments ? Object.keys(fragments).filter((key) => {\r\n    if (showOnlyFullFragments) {\r\n      const { s, p, o } = fragments[key];\r\n      return s && p && o;\r\n    }\r\n    return true\r\n  }).map((key, index) => {\r\n    const { s, p, o, i } = fragments[key];\r\n    return { \r\n      id: key, \r\n      index: index + 1, \r\n      s: createIriLink(s ? s.value : ''), \r\n      p: createIriLink(p ? p.value : ''), \r\n      o: createIriLink(o ? o.value : ''),\r\n      i: i === null ?\r\n        <CircularProgress size={26} /> :\r\n        <Button className={classes.fragmentButton}  onClick={showInstances(key)} color=\"primary\">\r\n          {i}{i ? <span>&nbsp;</span> : ''}{i ? <Visibility /> : ''}\r\n        </Button>\r\n    };\r\n  }) : [];\r\n  return (\r\n    \r\n    <Paper style={{ height: 620, width: '100%' }}>\r\n      <VirtualizedTable\r\n        rowCount={mRows.length}\r\n        rowGetter={({ index }) => mRows[index]}\r\n        columns={[\r\n          {\r\n            width: 100,\r\n            label: `(${mRows.length}) #`,\r\n            dataKey: 'index',\r\n            numeric: true,\r\n            align: 'right',\r\n          },\r\n          {\r\n            flexGrow: 1,\r\n            width: 0,\r\n            label: 'Subject',\r\n            dataKey: 's',\r\n          },\r\n          {\r\n            flexGrow: 1,\r\n            width: 0,\r\n            label: 'Predicate',\r\n            dataKey: 'p',\r\n          },\r\n          {\r\n            flexGrow: 1,\r\n            width: 0,\r\n            label: 'Object',\r\n            dataKey: 'o',\r\n          },\r\n          {\r\n            width: 150,\r\n            label: 'Instances',\r\n            dataKey: 'i',\r\n          },\r\n        ]}\r\n      />\r\n      {vocabIsSelected && !Object.keys(fragments).length && <Typography variant=\"subtitle2\">No class fragment found in this ontology</Typography>}\r\n    </Paper>\r\n    \r\n  );\r\n}\r\n\r\nexport default withStyles(styles)(FragmentsTable);\r\n/*<Table size=\"small\">\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell className={classes.head} align=\"left\">Subject</TableCell>\r\n          <TableCell className={classes.head} align=\"left\">Predicate</TableCell>\r\n          <TableCell className={classes.head} align=\"left\">Object</TableCell>\r\n          <TableCell className={classes.headLast} align=\"right\" title=\"The number of instantiated triples\">Instances</TableCell>\r\n        </TableRow>\r\n      </TableHead>\r\n      <TableBody>\r\n        {Object.keys(fragments).filter((key) => {\r\n          if (showOnlyFullFragments) {\r\n            const { s, p, o } = fragments[key];\r\n            return s && p && o;\r\n          }\r\n          return true;\r\n        }).map((key) => {\r\n          const { s, p, o, i } = fragments[key];\r\n          return (\r\n            <TableRow key={key}>\r\n              <TableCell align=\"left\">{s ? createIriLink(s.value) : ''}</TableCell>\r\n              <TableCell align=\"left\">{p ? createIriLink(p.value) : ''}</TableCell>\r\n              <TableCell align=\"left\">{o ? createIriLink(o.value) : ''}</TableCell>\r\n              <TableCell align=\"right\">\r\n                {\r\n                  i === null ?\r\n                    <CircularProgress size={26} /> :\r\n                    <Button className={classes.fragmentButton} variant={i.length ? 'contained' : 'text'} onClick={showInstances(key)} color=\"primary\" title={`Show ${i.length} instances` }>\r\n                      {i.length}{i.length ? <span>&nbsp;</span> : ''}{i.length ? <Visibility /> : ''}\r\n                    </Button>\r\n                }\r\n              </TableCell>\r\n            </TableRow>\r\n          );\r\n        })}\r\n        {vocabIsSelected && !Object.keys(fragments).length && \r\n          <TableRow>\r\n            <TableCell align=\"left\"><Typography variant=\"subtitle2\">No class fragment found in this ontology</Typography></TableCell>\r\n          </TableRow>}\r\n      </TableBody>\r\n        </Table>*/","import React from 'react';\r\n// import Table from '@material-ui/core/Table';\r\n// import TableBody from '@material-ui/core/TableBody';\r\n// import TableCell from '@material-ui/core/TableCell';\r\n// import TableHead from '@material-ui/core/TableHead';\r\n// import TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { createIriLink } from '../utils';\r\nimport VirtualizedTable from './VirtualizedTable'\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nconst styles = (theme) => ({\r\n  head1: {\r\n    backgroundColor: 'white',\r\n    position: 'sticky',\r\n    top: 0\r\n  },\r\n  head2: {\r\n    backgroundColor: '#004b6e',\r\n    color: 'white',\r\n    position: 'sticky',\r\n    top: 40,\r\n    fontWeight: 'bold',\r\n  }\r\n});\r\nconst FragmentInstancesTable = ({ fragmentInstancesLoading, fragmentInstances, classFragment, classes }) => {\r\n  const mRows = fragmentInstances ? fragmentInstances.map((fi, index) => {\r\n    const { s, p, o } = fi;\r\n    return { id: index, index: index + 1, s: createIriLink(s.value), p: createIriLink(p.value), o: createIriLink(o.value) };\r\n  }) : [];\r\n  return (\r\n    <Paper style={{ height: 620, width: '100%' }}>\r\n      {fragmentInstancesLoading ?\r\n        <div style={{ display: 'flex', justifyContent: 'center' }}><CircularProgress size={40} /></div> :\r\n        <VirtualizedTable\r\n          rowCount={mRows.length}\r\n          rowGetter={({ index }) => mRows[index]}\r\n          columns={[\r\n            {\r\n              width: 100,\r\n              label: `(${mRows.length}) #`,\r\n              dataKey: 'index',\r\n              numeric: true,\r\n              align: 'right',\r\n            },\r\n            {\r\n              flexGrow: 1,\r\n              width: 0,\r\n              label: <span>Subject class&nbsp;({createIriLink(classFragment ? classFragment.s.value : '')})</span>,\r\n              dataKey: 's',\r\n            },\r\n            {\r\n              flexGrow: 1,\r\n              width: 0,\r\n              label: <span>Predicate&nbsp;({createIriLink(classFragment ? classFragment.p.value : '')})</span>,\r\n              dataKey: 'p',\r\n            },\r\n            {\r\n              flexGrow: 1,\r\n              width: 0,\r\n              label: <span>Object class&nbsp;({createIriLink(classFragment ? classFragment.o.value : '')})</span>,\r\n              dataKey: 'o',\r\n            },\r\n          ]}\r\n        />\r\n      }\r\n    </Paper>\r\n  );\r\n  /*return (\r\n    <Table>\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell align=\"right\" className={classes.head1} style={{ width: 150 }}>#</TableCell>\r\n          <TableCell className={classes.head1}>Subject</TableCell>\r\n          <TableCell className={classes.head1}>Predicate</TableCell>\r\n          <TableCell className={classes.head1}>Object</TableCell>\r\n        </TableRow>\r\n        <TableRow>\r\n          <TableCell align=\"right\" className={classes.head2}>Class fragment</TableCell>\r\n          <TableCell className={classes.head2}>{classFragment && classFragment.s ? createIriLink(classFragment.s.value) : ''}</TableCell>\r\n          <TableCell className={classes.head2}>{classFragment && classFragment.p ? createIriLink(classFragment.p.value) : ''}</TableCell>\r\n          <TableCell className={classes.head2}>{classFragment && classFragment.o ? createIriLink(classFragment.o.value) : ''}</TableCell>\r\n        </TableRow>\r\n      </TableHead>\r\n      <TableBody>\r\n        {fragmentInstances && fragmentInstances.map((fi, index) => {\r\n          const { s, p, o } = fi;\r\n          return (\r\n            <TableRow key={index}>\r\n              <TableCell align=\"right\">{index + 1}</TableCell>\r\n              <TableCell>{createIriLink(s.value)}</TableCell>\r\n              <TableCell>{createIriLink(p.value)}</TableCell>\r\n              <TableCell>{createIriLink(o.value)}</TableCell>\r\n            </TableRow>\r\n          );\r\n        })}\r\n        {fragmentInstances && !fragmentInstances.length && (\r\n          <TableRow>\r\n            <TableCell></TableCell>\r\n            <TableCell align=\"left\">No instances available</TableCell>\r\n            <TableCell></TableCell>\r\n            <TableCell></TableCell>\r\n          </TableRow>\r\n        )}\r\n      </TableBody>\r\n    </Table>\r\n  );*/\r\n}\r\n\r\nexport default withStyles(styles)(FragmentInstancesTable);\r\n","import React from 'react';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from 'react-select';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { fetchVocabs } from '../network';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Button from '@material-ui/core/Button';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport Refresh from '@material-ui/icons/Refresh';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport { arrayMove, createLink } from '../utils';\r\nimport { getEndpointUrl } from '../sparql';\r\n\r\nconst styles = theme => ({\r\n  formControl: {\r\n    flexGrow: 1\r\n  },\r\n  submitButton: {\r\n    marginRight: theme.spacing(1),\r\n    minWidth: 140,\r\n  },\r\n  submitButtonContent: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: 120,\r\n  },\r\n});\r\nconst selectStyles = {\r\n  option: (styles, { data, isDisabled, isFocused, isSelected }) => {\r\n    return {\r\n      ...styles,\r\n      textAlign: 'left',\r\n      padding: '10px'\r\n    };\r\n  },\r\n};\r\nclass VocabSelector extends React.Component {\r\n  state = {\r\n    networkError: false,\r\n    selectOptions: [{ value: '', label: 'Loading, ... please wait' }],\r\n    selectedOption: null,\r\n    loading: false,\r\n  }\r\n  componentWillMount = () => {\r\n    fetchVocabs().then((res) => {\r\n      const iris = []; \r\n      res.results.bindings.forEach((binding) => {\r\n        iris.push({\r\n          iri: binding.vocab.value,\r\n          label: binding.vocabLabels ? binding.vocabLabels.value : '[Unknown vocab label]',\r\n          nClass: binding.nClass.value,\r\n          nIns: binding.nIns.value,\r\n        });\r\n      });\r\n      // iris.unshift({\r\n      //   iri: 'http://dbpedia.org',\r\n      //   label: 'DBpedia',\r\n      //   nClass: 760,\r\n      //   nIns: 18447062,\r\n      // });\r\n      // move vocabs that have code lists up the list\r\n      arrayMove(iris, 6, 0);\r\n      arrayMove(iris, 7, 1);\r\n      arrayMove(iris, 8, 2);\r\n      arrayMove(iris, 9, 3);\r\n      this.setState({\r\n        loading: false,\r\n        selectOptions: iris.map(({ iri, label, nClass, nIns }, index) => {\r\n          return { value: iri, label: `[${index + 1}] - ${iri}${label ? ` - ${label}` : ''}, classes: ${nClass}, instances: ${nIns}` };\r\n        })\r\n      }, this.props.onLoad);\r\n    }).catch((err) => {\r\n      this.handleNetworkError();\r\n    });\r\n  }\r\n  handleNetworkError = () => {\r\n    this.setState({ networkError: true });\r\n  }\r\n  handleSelectChange = (selectedOption) => {\r\n    this.setState({ selectedOption })\r\n    this.props.onVocabSelected(selectedOption);\r\n  }\r\n  closeModal = () => {\r\n    this.setState({ networkError: false })\r\n  }\r\n  render = () => {\r\n    const { classes } = this.props;\r\n    return (\r\n      <AppBar className={classes.searchBar} position=\"static\" color=\"default\" elevation={0}>\r\n        <Toolbar>\r\n          <Grid container spacing={2} alignItems=\"center\">\r\n            <Grid item>\r\n              <SearchIcon className={classes.block} color=\"inherit\" />\r\n            </Grid>\r\n\r\n            <FormControl className={this.props.classes.formControl}>\r\n              <Select\r\n                styles={selectStyles}\r\n                TextFieldProps={{ label: 'Ontology IRI', placeholder: 'Type to search for ontology' }}\r\n                options={this.state.selectOptions}\r\n                onChange={this.handleSelectChange}\r\n              />\r\n            </FormControl>\r\n            <Grid item>\r\n              <div className={classes.submitButton}>\r\n                <Button color=\"primary\" onClick={this.props.onShowSparql} disabled={!this.state.selectedOption}>\r\n                  <div className={classes.submitButtonContent}><Visibility style={{ fontSize: 24 }} />&nbsp;View SPARQL</div>\r\n                </Button>\r\n                <Button color=\"primary\" onClick={this.props.onReloadClick} disabled={!this.state.selectedOption}>\r\n                  <div className={classes.submitButtonContent}>\r\n                    {this.state.loading || this.props.loading ? <CircularProgress size={20} /> : <Refresh style={{ fontSize: 20 }} />}&nbsp;\r\n                    {this.state.loading || this.props.loading ? 'Loading...' : 'Reload'}\r\n                  </div>\r\n                </Button>\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n        </Toolbar>\r\n        \r\n        <Dialog onClose={this.closeModal} open={this.state.networkError ? true : false}>\r\n          <DialogTitle>Info</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText>\r\n              Oops! Looks like the SPARQL endpoint is not working. Please try again later or try clicking on the button \"Reload ontology list\".<br/>\r\n              {createLink(getEndpointUrl())}\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={this.closeModal} color=\"primary\">Close</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </AppBar>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(VocabSelector);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport Close from '@material-ui/icons/Close';\r\nimport axios from 'axios';\r\nimport bluebird from 'bluebird';\r\nimport uuidv4 from 'uuid/v4';\r\nimport { getEndpointUrl, PREFIXES, getQuerySchemaFragments, getQueryFragmentInstancesCount, getQueryFragmentInstances } from '../sparql';\r\nimport { axiosConfig } from '../network';\r\nimport { createIriLink, createLink } from '../utils';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FragmentsTable from './FragmentsTable';\r\nimport FragmentInstancesTable from './FragmentInstancesTable';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport chunk from 'lodash/chunk';\r\nimport {UnControlled as CodeMirror} from 'react-codemirror2';\r\nimport VocabSelector from './VocabSelector';\r\n\r\nconst styles = theme => ({\r\n  paper: {\r\n    margin: 'auto',\r\n    position: 'relative',\r\n  },\r\n  searchBar: {\r\n    borderBottom: '1px solid rgba(0, 0, 0, 0.12)',\r\n  },\r\n  block: {\r\n    display: 'block',\r\n  },\r\n  codeBlock: {\r\n    padding: '10px',\r\n    width: 'calc(100% - 24px)',\r\n    margin: '10px auto',\r\n    fontWeight: 'bold',\r\n    backgroundColor: '#ccc',\r\n    height: 'auto',\r\n    border: 'none',\r\n  },\r\n  controls: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  },\r\n  dialogTitle: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  }\r\n});\r\nclass ClassFragmentsPage extends React.Component {\r\n  state = {\r\n    fragments: {},\r\n    selectedVocabOption: null,\r\n    loading: false,\r\n    fragmentInstances: null,\r\n    classFragment: null,\r\n    sparqlPreview: false,\r\n    showOnlyFullFragments: localStorage.getItem('preferences.showOnlyFullFragments') === 'true',\r\n  }\r\n  onVocabSelected = (selectedVocabOption) => {\r\n    this.setState({ selectedVocabOption }, () => {\r\n      this.fetchClassFragments();\r\n    });\r\n  }\r\n  handleInputChange = (name) => (e) => {\r\n    this.setState({ [name]: e.target.checked });\r\n    if (name === 'showOnlyFullFragments') {\r\n      localStorage.setItem('preferences.showOnlyFullFragments', e.target.checked);\r\n    }\r\n  };\r\n  fetchClassFragments = () => {\r\n    this.setState({ loading: true });\r\n    const payload = `query=${PREFIXES}${getQuerySchemaFragments(this.state.selectedVocabOption.value)}`;\r\n    return axios.post(getEndpointUrl(), payload, axiosConfig).then((resp) => {\r\n      const fragments = {};\r\n      resp.data.results.bindings.forEach((binding) => {\r\n        const { s, sd, p, o, od } = binding;\r\n        const uuid = uuidv4();\r\n        const fragment = {\r\n          s: s ? s : sd || sd || null,\r\n          p,\r\n          o: o ? o : o || od || null,\r\n        };\r\n        fragment.i = fragment.s && fragment.o && fragment.p ? null : 0;\r\n        fragments[uuid] = fragment;\r\n      });\r\n      this.setState({ fragments, loading: false }, () => {\r\n        this.fetchFragmentInstances();\r\n      });\r\n    });\r\n  }\r\n  fetchFragmentInstances = () => {\r\n    const { fragments } = this.state;\r\n    const fragmentKeys = Object.keys(fragments).filter((key) => {\r\n      const { s, p, o } = fragments[key];\r\n      if (this.state.showOnlyFullFragments) {\r\n        return s && p && o;\r\n      }\r\n      return true;\r\n    });\r\n    const fragmentKeyGroups = chunk(fragmentKeys, 10);\r\n    bluebird.each(fragmentKeyGroups, (fkg) => {\r\n      const counts = {};\r\n      return bluebird.delay(500).then(() => {\r\n        return bluebird.map(fkg, (key) => {\r\n          const { s, p, o } = fragments[key];\r\n          if (s && p && o) {\r\n            const payload = `query=${PREFIXES}${getQueryFragmentInstancesCount(fragments[key])}`;\r\n            return axios.post(getEndpointUrl(), payload, axiosConfig).then((resp) => {\r\n              counts[key] = resp.data.results.bindings[0].n.value;\r\n            });\r\n          }\r\n          return bluebird.delay(0);\r\n        });\r\n      }).then(() => {\r\n        const newFragments = { ...fragments };\r\n        Object.keys(counts).forEach((countKey) => {\r\n          newFragments[countKey].i = counts[countKey];\r\n        });\r\n        this.setState({ fragments: newFragments });\r\n      });\r\n    });\r\n  };\r\n  showSparqlPreview = (query) => () => {\r\n    this.setState({ sparqlPreview: query });\r\n  }\r\n  showInstances = (key) => () => {\r\n    const { s, p, o } = this.state.fragments[key];\r\n    if (!s || !p || !o) {\r\n      return false; \r\n    }\r\n    const payload = `query=${PREFIXES}${getQueryFragmentInstances(this.state.fragments[key])}`;\r\n    this.setState({ fragmentInstancesLoading: true });\r\n    return axios.post(getEndpointUrl(), payload, axiosConfig).then((resp) => {\r\n      this.setState({\r\n        fragmentInstancesLoading: false,\r\n        fragmentInstances: resp.data.results.bindings,\r\n        classFragment: { s, p, o }\r\n      });\r\n    });\r\n  }\r\n  closeSparqlModal = () => {\r\n    this.setState({ sparqlPreview: false });\r\n  }\r\n  closeInstancesModal = () => {\r\n    this.setState({ fragmentInstances: null, classFragment: null });\r\n  }\r\n  render = () => {\r\n    const { classes } = this.props;\r\n    return (\r\n      <>\r\n        <div className={classes.controls}>\r\n          <Typography align=\"left\" variant=\"h5\">\r\n            Find class fragments\r\n          </Typography>\r\n          <div>\r\n            <FormControlLabel\r\n              control={<Switch checked={this.state.showOnlyFullFragments} onChange={this.handleInputChange('showOnlyFullFragments')} value=\"showOnlyFullFragments\" color=\"primary\" />}\r\n              label=\"Show only full fragments\"\r\n            />\r\n            <Button color=\"primary\" onClick={\r\n              this.showSparqlPreview(\r\n                getQuerySchemaFragments(\r\n                  this.state.selectedVocabOption ?\r\n                    this.state.selectedVocabOption.value :\r\n                    '__YOUR_SELECTED_VOCAB__'\r\n                ).trim()\r\n              )\r\n            }>View SPARQL&nbsp;<Visibility /></Button>\r\n          </div>\r\n        </div>\r\n        <Typography align=\"left\" variant=\"subtitle2\">\r\n          This tool will help you identify class fragments in a selected ontology and fetch their instances. Begin by selecting an ontology in the list below.\r\n        </Typography>\r\n        <Paper className={classes.paper}>\r\n          <VocabSelector onVocabSelected={this.onVocabSelected} onReloadClick={this.fetchClassFragments} />\r\n          <Paper className={classes.root}>\r\n            <FragmentsTable\r\n              fragments={this.state.fragments}\r\n              showInstances={this.showInstances}\r\n              showOnlyFullFragments={this.state.showOnlyFullFragments}\r\n              vocabIsSelected={this.state.selectedVocabOption ? true : false}\r\n            />\r\n          </Paper>\r\n        </Paper>\r\n        <Dialog onClose={this.closeInstancesModal} open={this.state.fragmentInstances || this.state.fragmentInstancesLoading ? true : false} fullWidth={true} maxWidth=\"xl\">\r\n          <DialogTitle>\r\n            <div className={classes.dialogTitle}>\r\n              <span>Class fragment instances in {this.state.selectedVocabOption && createIriLink(this.state.selectedVocabOption.value)}</span>\r\n              {this.state.classFragment && (\r\n                <span>\r\n                  <Button color=\"primary\" onClick={\r\n                    this.showSparqlPreview(\r\n                      getQueryFragmentInstances(this.state.classFragment).trim()\r\n                    )\r\n                  }>View SPARQL&nbsp;<Visibility /></Button>\r\n                  <Button color=\"primary\" onClick={this.closeInstancesModal}><Close /></Button>\r\n                </span>\r\n              )}\r\n            </div>\r\n          </DialogTitle>\r\n          <FragmentInstancesTable fragmentInstancesLoading={this.state.fragmentInstancesLoading} fragmentInstances={this.state.fragmentInstances} classFragment={this.state.classFragment} />\r\n        </Dialog>\r\n        <Dialog onClose={this.closeSparqlModal} open={this.state.sparqlPreview ? true : false} fullWidth={true} maxWidth=\"md\">\r\n          <DialogTitle>\r\n            <div className={classes.dialogTitle}>\r\n              <span>SPARQL query preview</span>\r\n              <Button color=\"primary\" onClick={this.closeSparqlModal}><Close /></Button>\r\n            </div>\r\n            <Typography variant=\"body2\">See also {createLink('https://github.com/nvbach91/iga-hybrid')}</Typography>\r\n          </DialogTitle>\r\n          <div className=\"code-mirror-container\">\r\n            <CodeMirror value={this.state.sparqlPreview} options={{\r\n              mode: 'sparql',\r\n              //theme: 'material',\r\n              lineNumbers: true,\r\n              readOnly: true,\r\n            }}/>\r\n          </div>\r\n        </Dialog>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nClassFragmentsPage.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(ClassFragmentsPage);\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { createIriLink } from '../utils';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport VirtualizedTable from './VirtualizedTable'\r\n\r\nconst tableHeadStyle = {\r\n  backgroundColor: 'white',\r\n  position: 'sticky',\r\n  top: 0,\r\n  fontWeight: 'bold',\r\n};\r\nconst styles = (theme) => ({\r\n  head: tableHeadStyle,\r\n  headLast: {\r\n    ...tableHeadStyle,\r\n    width: 150,\r\n  },\r\n  fragmentButton: {\r\n    padding: '4px 16px',\r\n    minWidth: 96,\r\n    justifyContent: 'flex-end',\r\n  }\r\n});\r\n\r\nconst CodeListsTable = ({ codeLists, showInstances, vocabIsSelected, classes, loading }) => {\r\n  const mRows = codeLists ? Object.keys(codeLists).map((key, index) => {\r\n    const { d, p, c, ni } = codeLists[key];\r\n    return { \r\n      id: key, \r\n      index: index + 1, \r\n      d: createIriLink(d ? d.value : ''), \r\n      p: createIriLink(p ? p.value : ''), \r\n      c: createIriLink(c ? c.value : ''), \r\n      ni: ni ? ni.value : '', \r\n      i: ni ? <Button className={classes.fragmentButton}  onClick={showInstances(key)} color=\"primary\">{ni.value}&nbsp;<Visibility /></Button> : 0\r\n    };\r\n  }) : [];\r\n  return (\r\n    \r\n    <Paper style={{ height: 620, width: '100%' }}>\r\n      {(!vocabIsSelected || Object.keys(codeLists).length || loading) && <VirtualizedTable\r\n        rowCount={mRows.length}\r\n        rowGetter={({ index }) => mRows[index]}\r\n        columns={[\r\n          {\r\n            width: 100,\r\n            label: `(${mRows.length}) #`,\r\n            dataKey: 'index',\r\n            numeric: true,\r\n          },\r\n          {\r\n            flexGrow: 1,\r\n            width: 0,\r\n            label: 'Domain',\r\n            dataKey: 'd',\r\n          },\r\n          {\r\n            flexGrow: 1,\r\n            width: 0,\r\n            label: 'Property',\r\n            dataKey: 'p',\r\n          },\r\n          {\r\n            flexGrow: 1,\r\n            width: 0,\r\n            label: 'Code list (Range)',\r\n            dataKey: 'c',\r\n          },\r\n          {\r\n            flexGrow: 1,\r\n            width: 0,\r\n            label: 'Members',\r\n            dataKey: 'ni',\r\n          },\r\n          {\r\n            width: 150,\r\n            label: 'View',\r\n            dataKey: 'i',\r\n          },\r\n        ]}\r\n      />}\r\n      {vocabIsSelected && !Object.keys(codeLists).length && !loading && <Paper>\r\n        <Typography variant=\"subtitle2\">No code lists found in this ontology</Typography>\r\n        <Typography variant=\"body2\">Please select another ontology in the list</Typography>\r\n      </Paper>}\r\n    </Paper>\r\n    \r\n  );\r\n}\r\n\r\nexport default withStyles(styles)(CodeListsTable);\r\n","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { createIriLink } from '../utils';\r\nimport VirtualizedTable from './VirtualizedTable'\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nconst styles = (theme) => ({\r\n  head1: {\r\n    backgroundColor: 'white',\r\n    position: 'sticky',\r\n    top: 0\r\n  },\r\n  head2: {\r\n    backgroundColor: '#004b6e',\r\n    color: 'white',\r\n    position: 'sticky',\r\n    top: 40,\r\n    fontWeight: 'bold',\r\n  }\r\n});\r\nconst CodeListInstancesTable = ({ loading, codeListInstances, codeList, classes }) => {\r\n  const mRows = codeListInstances ? codeListInstances.map((cli, index) => {\r\n    const { i, sc, scs } = cli;\r\n    return {\r\n      id: index,\r\n      index: index + 1,\r\n      i: createIriLink(i.value),\r\n      skosConcept: createIriLink(sc ? sc.value : 'Not a skos:Concept'),\r\n      skosConceptScheme: createIriLink(scs ? scs.value : 'None')\r\n    };\r\n  }) : [];\r\n  return (\r\n    <Paper style={{ height: 620, width: '100%' }}>\r\n      {loading ?\r\n        <div style={{ display: 'flex', justifyContent: 'center' }}><CircularProgress size={40} /></div> :\r\n        <VirtualizedTable\r\n          rowCount={mRows.length}\r\n          rowGetter={({ index }) => mRows[index]}\r\n          columns={[\r\n            {\r\n              width: 100,\r\n              label: `(${mRows.length}) #`,\r\n              dataKey: 'index',\r\n              numeric: true,\r\n              align: 'right',\r\n            },\r\n            {\r\n              flexGrow: 2,\r\n              width: 0,\r\n              label: 'Instance',\r\n              dataKey: 'i',\r\n            },\r\n            {\r\n              flexGrow: 1,\r\n              width: 0,\r\n              label: 'skos:Concept',\r\n              dataKey: 'skosConcept',\r\n            },\r\n            {\r\n              flexGrow: 2,\r\n              width: 0,\r\n              label: 'skos:inScheme',\r\n              dataKey: 'skosConceptScheme',\r\n            },\r\n          ]}\r\n        />\r\n      }\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default withStyles(styles)(CodeListInstancesTable);\r\n","import { shortenIri } from \"../utils\";\r\n\r\n/* ################ VARIABLES ################ */\r\nexport const parseToVOWLSpec = (bindings) => {\r\n  //console.log(bindings);\r\n  let nodes = {};\r\n  let links = [];\r\n  // case 'deprecated':\r\n  // case 'external':\r\n  // case 'equivalent':\r\n  // case 'rdfsClass':\r\n  // case 'class':\r\n  // case 'union':\r\n  // case 'intersection':\r\n  // case 'complement':\r\n  // case 'rdfsResource':\r\n  // case 'thing':\r\n  // case 'literal':\r\n  // case 'datatype':\r\n  let linkedEntities = {};\r\n  bindings.forEach((binding) => {\r\n    if (!nodes[binding.c.value] || binding.cn) {\r\n      nodes[binding.c.value] = { type: 'class', name: shortenIri(binding.c.value), label: binding.cn ? binding.cn.value : shortenIri(binding.c.value) };\r\n    }\r\n    if (!nodes[binding.i1.value] || binding.i1n) {\r\n      nodes[binding.i1.value] = { type: 'rdfsClass', name: shortenIri(binding.i1.value), label: binding.i1n ? binding.i1n.value : shortenIri(binding.i1.value) };\r\n    }\r\n    if (!linkedEntities[`${binding.i1.value}|${binding.c.value}`]) {\r\n      links.push({ s: binding.i1.value, p: binding.cp.values, o: binding.c.value, label: shortenIri(binding.cp.value) });\r\n      linkedEntities[`${binding.i1.value}|${binding.c.value}`] = true;\r\n    }\r\n    if (binding.i2) {\r\n      nodes[binding.i2.value] = { type: 'rdfsClass', name: shortenIri(binding.i2.value), label: binding.i2n ? binding.i2n.value : shortenIri(binding.i2.value)};\r\n      //nodes[binding.p.value] = shortenIri(binding.p.value);\r\n      links.push({ s: binding.i1.value, p: binding.p.value, o: binding.i2.value, label: shortenIri(binding.p.value) });\r\n    }\r\n  });\r\n  const nodeIndexes = {};\r\n  nodes = Object.keys(nodes).slice(0, 100).map((key, index) => {\r\n    nodeIndexes[key] = index;\r\n    const { name, type, label } = nodes[key];\r\n    return { fullName: name + (label ? (label === name ? '' : (' -- ' + label)) : ''), name: label, type, uri: key };\r\n  });\r\n  links = links.filter((link) => {\r\n    const source = link.s;\r\n    const target = link.o;\r\n    return nodeIndexes[source] >= 0 && nodeIndexes[target] >= 0;\r\n  }).map((link) => {\r\n    const source = link.s;\r\n    const target = link.o;\r\n    return {\r\n      source: nodeIndexes[source],\r\n      target: nodeIndexes[target],\r\n      valueTo: link.label,\r\n      //propertyTo: 'subclass',\r\n      uriTo: link.p,\r\n    };\r\n  });\r\n  return {\r\n    info: [\r\n      {\r\n        title: 'Code list structure graph',\r\n        url: 'http://codelist.cc',\r\n        version: '1.0.0',\r\n        authors: 'Nguyen, V.B.',\r\n        description: 'A code list structure graph',\r\n      },\r\n    ],\r\n    nodes,\r\n    links,\r\n  };\r\n};\r\n\r\nexport const drawGraph = (data) => {\r\n  var d3 = window.d3;\r\n  var linkDistanceClassSlider;\r\n  var linkDistanceClassLabel;\r\n  var linkDistanceLiteralLabel;\r\n  var linkDistanceLiteralSlider;\r\n\r\n  var GRAPH_WIDTH = window.innerWidth;\r\n  var GRAPH_HEIGHT = window.innerHeight;\r\n  var DEFAULT_VISIBLE_LINKDISTANCE = 240;\r\n  var visibleLinkDistance = DEFAULT_VISIBLE_LINKDISTANCE;\r\n  var visibleLiteralLinkDistance = DEFAULT_VISIBLE_LINKDISTANCE;\r\n  var CHARGE = -1000;\r\n  var LITERAL_HEIGHT = 20;\r\n  var LITERAL_WIDTH = 60;\r\n  var CLASS_RADIUS = 50;\r\n  var THING_RADIUS = 30;\r\n  var SPECIAL_OPERATIONS_RADIUS = 40;\r\n  var LABEL_HEIGHT = 28;\r\n  var LABEL_WIDTH = 120;\r\n  var ADDITIONAL_TEXT_SPACE = 4;\r\n  var CARDINALITY_HDISTANCE = 20;\r\n  var CARDINALITY_VDISTANCE = 10;\r\n  var SPACE_BETWEEN_SPANS = 12;\r\n  var force;\r\n  var svg;\r\n  var label;\r\n  var link;\r\n  var linkPath;\r\n  var cardinalities;\r\n  var node;\r\n  var json;\r\n  var lastFocusedNode;\r\n  var curveFunction = d3.svg\r\n      .line()\r\n      .x(function(d) {\r\n        return d.x;\r\n      })\r\n      .y(function(d) {\r\n        return d.y;\r\n      })\r\n      .interpolate('cardinal'),\r\n    loopFunction = d3.svg\r\n      .line()\r\n      .x(function(d) {\r\n        return d.x;\r\n      })\r\n      .y(function(d) {\r\n        return d.y;\r\n      })\r\n      .interpolate('cardinal')\r\n      .tension(-1),\r\n    zoom = d3.behavior\r\n      .zoom()\r\n      .scaleExtent([0.1, 4])\r\n      .on('zoom', zoomed);\r\n\r\n  /* ################################ STARTING GRAPH ################################ */\r\n  function draw(graphContainerElement, width, height) {\r\n    /* ################ SVG CONTAINER ################ */\r\n    var graphContainer = d3.select(graphContainerElement).attr('id', 'graph');\r\n\r\n    /* CUSTOMIZATION */\r\n    if (width !== undefined) {\r\n      GRAPH_WIDTH = width;\r\n    }\r\n\r\n    if (height !== undefined) {\r\n      GRAPH_HEIGHT = height;\r\n    }\r\n\r\n    // Remove an existing graph\r\n    graphContainer.select('.svgGraph').remove();\r\n\r\n    svg = graphContainer\r\n      .append('svg')\r\n      .classed('svgGraph', true)\r\n      .attr('width', GRAPH_WIDTH)\r\n      .attr('height', GRAPH_HEIGHT)\r\n      .call(zoom)\r\n      .append('g');\r\n\r\n    var resetOption = document.getElementById('resetOption');\r\n    var sliderOption = document.getElementById('sliderOption');\r\n    var distanceSlider = document.getElementById('distanceSlider');\r\n    var resetButton = document.getElementById('reset');\r\n    if (distanceSlider) distanceSlider.remove();\r\n    if (resetButton) resetButton.remove();\r\n\r\n    d3.select(resetOption)\r\n      .append('button')\r\n      .attr('id', 'reset')\r\n      .property('type', 'reset')\r\n      .text('Reset')\r\n      .on('click', resetGraph);\r\n\r\n    var slidDiv = d3\r\n      .select(sliderOption)\r\n      .append('div')\r\n      .attr('id', 'distanceSlider');\r\n\r\n    linkDistanceClassLabel = slidDiv\r\n      .append('label')\r\n      .attr('for', 'distanceSlider')\r\n      .text('DEFAULT_VISIBLE_LINKDISTANCE');\r\n    linkDistanceLiteralLabel = linkDistanceClassLabel;\r\n\r\n    linkDistanceClassSlider = slidDiv\r\n      .append('input')\r\n      .attr('type', 'range')\r\n      .attr('min', 10)\r\n      .attr('max', 600)\r\n      .attr('value', 'DEFAULT_VISIBLE_LINKDISTANCE')\r\n      .attr('step', 10)\r\n      .on('input', changeDistance);\r\n    linkDistanceLiteralSlider = linkDistanceClassSlider;\r\n\r\n    /* ################ FORCE LAYOUT ################ */\r\n\r\n    /* Initialize fields */\r\n    initialize();\r\n\r\n    /* Creates the force layout with data from the json file */\r\n    force = d3.layout\r\n      .force()\r\n      .charge(getCharge())\r\n      .distance(getLinkDistance)\r\n      .gravity(0.025)\r\n      .linkStrength(0.7) // Flexibility of links\r\n      .size([GRAPH_WIDTH, GRAPH_HEIGHT])\r\n      .nodes(json.nodes)\r\n      .links(json.links)\r\n      .on('tick', tick)\r\n      .start();\r\n\r\n    /* Per-type markers, as they don't inherit styles */\r\n    var defs = svg.append('defs');\r\n    json.links.forEach(function(l, i) {\r\n      l.id = i;\r\n      if (!isSpecialLink(l)) {\r\n        addMarker(defs, l, false);\r\n        if (l.inverse) {\r\n          addMarker(defs, l, true);\r\n        }\r\n      }\r\n    });\r\n\r\n    /* ################ LINKS ################ */\r\n\r\n    /* Creates links groups */\r\n    link = svg\r\n      .selectAll('.link')\r\n      .data(json.links)\r\n      .enter()\r\n      .append('g')\r\n      .attr('class', function(d) {\r\n        return getMarkerId(d, true) + ' ' + getMarkerId(d, false);\r\n      })\r\n      .classed('link', true);\r\n    /* Creates link paths */\r\n    linkPath = link\r\n      .append('path')\r\n      .attr('class', function(d) {\r\n        return d.type;\r\n      })\r\n      .classed('link-path', true)\r\n      .attr('marker-end', function(l) {\r\n        if (!isSpecialLink(l)) {\r\n          return 'url(#' + getMarkerId(l, false) + ')';\r\n        }\r\n        return '';\r\n      })\r\n      .attr('marker-start', function(l) {\r\n        if (l.inverse && !isSpecialLink(l)) {\r\n          return 'url(#' + getMarkerId(l, true) + ')';\r\n        }\r\n        return '';\r\n      });\r\n\r\n    /* ################ LABELS ################ */\r\n\r\n    /* Creates label groups */\r\n    label = svg\r\n      .selectAll('.label')\r\n      .data(json.links)\r\n      .enter()\r\n      .append('g')\r\n      .classed('label', true);\r\n\r\n    /* Exclude links without label */\r\n    label = label.filter(function(d) {\r\n      var needsLabel = d.valueTo || d.valueFrom;\r\n      if (d.propertyTo === 'disjoint') {\r\n        needsLabel = true;\r\n      }\r\n      return needsLabel;\r\n    });\r\n\r\n    /* First only add single labels */\r\n    label\r\n      .filter(function(d) {\r\n        return !d.inverse;\r\n      })\r\n      .each(function(d) {\r\n        addLabel(d3.select(this), d, 'to');\r\n      });\r\n\r\n    /* Then add double labels */\r\n    label\r\n      .filter(function(d) {\r\n        return d.inverse;\r\n      })\r\n      .each(function(d) {\r\n        addLabel(d3.select(this), d, 'to');\r\n        addLabel(d3.select(this), d, 'from');\r\n      });\r\n\r\n    /* ############### CARDINALITIES ############### */\r\n\r\n    cardinalities = svg\r\n      .selectAll('.cardinality')\r\n      .data(json.links)\r\n      .enter()\r\n      .append('g')\r\n      .classed('cardinality', true);\r\n\r\n    cardinalities = cardinalities.filter(function(l) {\r\n      return l.cardTo || l.cardFrom;\r\n    });\r\n\r\n    cardinalities\r\n      .filter(function(l) {\r\n        return l.cardTo;\r\n      })\r\n      .each(function() {\r\n        addCardinality(d3.select(this), 'to');\r\n      });\r\n\r\n    cardinalities\r\n      .filter(function(l) {\r\n        return l.cardFrom;\r\n      })\r\n      .each(function() {\r\n        addCardinality(d3.select(this), 'from');\r\n      });\r\n\r\n    /* ################ NODES ################ */\r\n\r\n    var drag = d3.behavior\r\n      .drag()\r\n      .on('dragstart', function(d) {\r\n        d3.event.sourceEvent.stopPropagation(); // Prevent panning\r\n        d.fixed = true;\r\n      })\r\n      .on('drag', function(d) {\r\n        d.px = d3.event.x;\r\n        d.py = d3.event.y;\r\n        force.resume();\r\n      })\r\n      .on('dragend', function(d) {\r\n        d.fixed = false;\r\n      });\r\n\r\n    /* Creates node groups */\r\n    node = svg\r\n      .selectAll('.node')\r\n      .data(json.nodes)\r\n      .enter()\r\n      .append('g')\r\n      .attr('class', 'node')\r\n      /*.on(\"click\", function (d) {\r\n         if (d3.event.defaultPrevented) {\r\n         return;\r\n         } // ignore drag\r\n         // First remove all children vom <div> box and afterwards add new information\r\n         alert(\"Name: \" + d.name + \"\\nType: \" + d.type);\r\n         })*/\r\n      .on('mouseover', function(d) {\r\n        if (d.linkIDs) {\r\n          d.linkIDs.forEach(function(entry) {\r\n            d3.select(link[0][entry])\r\n              .select('path')\r\n              .classed('hovered', true);\r\n          });\r\n        }\r\n      })\r\n      .on('mouseout', function(d) {\r\n        if (d.linkIDs) {\r\n          d.linkIDs.forEach(function(entry) {\r\n            d3.select(link[0][entry])\r\n              .select('path')\r\n              .classed('hovered', false);\r\n          });\r\n        }\r\n      })\r\n      .call(drag);\r\n\r\n    // Adds the correct type to node.\r\n    node.each(function(d) {\r\n      var element = d3.select(this);\r\n      switch (d.type) {\r\n        case 'class':\r\n          addClass(element, d);\r\n          break;\r\n        case 'thing':\r\n          addThing(element, d);\r\n          break;\r\n        case 'equivalent':\r\n          addEquivalentClass(element, d);\r\n          break;\r\n        case 'deprecated':\r\n          addDeprecatedClass(element, d);\r\n          break;\r\n        case 'external':\r\n          addExternalClass(element, d);\r\n          break;\r\n        case 'literal':\r\n          addLiteral(element, d);\r\n          break;\r\n        case 'datatype':\r\n          addDatatype(element, d);\r\n          break;\r\n        case 'rdfsClass':\r\n          addRDFSClass(element, d);\r\n          break;\r\n        case 'rdfsResource':\r\n          addRDFSResource(element, d);\r\n          break;\r\n        case 'intersection':\r\n          addIntersectionClass(element, d);\r\n          break;\r\n        case 'union':\r\n          addUnionClass(element, d);\r\n          break;\r\n        case 'complement':\r\n          addComplementClass(element, d);\r\n          break;\r\n        default:\r\n          console.log('PROBLEM DURING DRAWING CLASSES - UNKNOWN TYPE: ' + d.type);\r\n      }\r\n    });\r\n\r\n    /* ################ GET DETAILS ################ */\r\n    getNodeInfo();\r\n    getLinkInfo();\r\n  }\r\n\r\n  /* Calculates the new positions of the nodes and links */\r\n  var tick = function tickFunct() {\r\n    linkPath.attr('d', function(l) {\r\n      // Process self links in a separate function\r\n      if (l.source === l.target) {\r\n        return calculateSelfLinkPath(l);\r\n      }\r\n\r\n      // Calculate these every time to get nicer curved arrows\r\n      var pathStart = calculateIntersection(l.target, l.source, 1),\r\n        pathEnd = calculateIntersection(l.source, l.target, 1),\r\n        curvePoint = calculateCurvePoint(pathStart, pathEnd, l);\r\n      l.curvePoint = curvePoint;\r\n\r\n      return curveFunction([calculateIntersection(l.curvePoint, l.source, 1), curvePoint, calculateIntersection(l.curvePoint, l.target, 1)]);\r\n    });\r\n\r\n    node.attr('transform', function(node) {\r\n      return 'translate(' + node.x + ',' + node.y + ')';\r\n    });\r\n\r\n    cardinalities.selectAll('g').attr('transform', function(l) {\r\n      var group = d3.select(this),\r\n        pos;\r\n      if (group.classed('to')) {\r\n        pos = calculateIntersection(l.curvePoint, l.source, CARDINALITY_HDISTANCE);\r\n      } else {\r\n        pos = calculateIntersection(l.curvePoint, l.target, CARDINALITY_HDISTANCE);\r\n      }\r\n\r\n      var n = calculateNormalVector(l.curvePoint, l.source, CARDINALITY_VDISTANCE);\r\n\r\n      if (l.source.index < l.target.index) {\r\n        n.x = -n.x;\r\n        n.y = -n.y;\r\n      }\r\n\r\n      return 'translate(' + (pos.x + n.x) + ',' + (pos.y + n.y) + ')';\r\n    });\r\n\r\n    label.selectAll('g').attr('transform', function(l) {\r\n      var group = d3.select(this),\r\n        midX = l.curvePoint.x,\r\n        midY = l.curvePoint.y;\r\n\r\n      if (l.inverse) {\r\n        if (group.classed('to')) {\r\n          midY += LABEL_HEIGHT / 2 + 1;\r\n        } else if (group.classed('from')) {\r\n          midY -= LABEL_HEIGHT / 2 + 1;\r\n        }\r\n      }\r\n\r\n      return 'translate(' + midX + ',' + midY + ')';\r\n    });\r\n  };\r\n\r\n  /* ################ FUNCTIONS ################ */\r\n\r\n  /* Add String function to calculate the text field length */\r\n  // eslint-disable-next-line\r\n  String.prototype.width = function(textStyle) {\r\n    // Set a default value\r\n    if (!textStyle) {\r\n      textStyle = 'text';\r\n    }\r\n    var d = d3\r\n        .select('body')\r\n        .append('div')\r\n        .attr('class', textStyle)\r\n        .attr('id', 'width-test') // tag this element to identify it\r\n        .text(this),\r\n      w = document.getElementById('width-test').offsetWidth;\r\n    d.remove();\r\n    return w;\r\n  };\r\n\r\n  /* Function to truncate a string */\r\n  // eslint-disable-next-line\r\n  String.prototype.truncate = function(maxLength, textStyle) {\r\n    maxLength -= ADDITIONAL_TEXT_SPACE;\r\n    if (isNaN(maxLength) || maxLength <= 0) {\r\n      return this;\r\n    }\r\n\r\n    var text = this,\r\n      textLength = this.length,\r\n      textWidth,\r\n      ratio;\r\n\r\n    while (true) {\r\n      textWidth = text.width(textStyle);\r\n      if (textWidth <= maxLength) {\r\n        break;\r\n      }\r\n\r\n      ratio = textWidth / maxLength;\r\n      textLength = Math.floor(textLength / ratio);\r\n      text = text.substring(0, textLength);\r\n    }\r\n\r\n    if (this.length > textLength) {\r\n      return this.substring(0, textLength - 3) + '...';\r\n    }\r\n    return this;\r\n  };\r\n\r\n  /* Checks whether the passed node is a special node */\r\n  var isSpecialLink = function isSpecialLinkFunct(link) {\r\n    if (link.type === 'special') {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  /* Reset zoom and pan properties */\r\n  var resetGraph = function resetGraphFunct() {\r\n    zoom.translate([0, 0]).scale(1);\r\n    svg.attr('transform', 'translate(' + zoom.translate() + ')scale(' + zoom.scale() + ')');\r\n    if (linkDistanceClassSlider !== undefined) {\r\n      linkDistanceClassSlider.property('value', DEFAULT_VISIBLE_LINKDISTANCE);\r\n    }\r\n    if (linkDistanceLiteralSlider !== undefined) {\r\n      linkDistanceLiteralSlider.property('value', DEFAULT_VISIBLE_LINKDISTANCE);\r\n    }\r\n    changeDistance();\r\n    // also reset additional details displayed\r\n    d3.select('#otherDetails').classed('hidden', true);\r\n  };\r\n\r\n  /* Initialize various fields */\r\n  var initialize = function initializeFunct() {\r\n    for (var i = 0; i < json.nodes.length; i++) {\r\n      var node = json.nodes[i],\r\n        maxTextWidth,\r\n        radius;\r\n      switch (node.type) {\r\n        case 'deprecated':\r\n        case 'external':\r\n        case 'equivalent':\r\n        case 'rdfsClass':\r\n        case 'class':\r\n          radius = CLASS_RADIUS;\r\n          maxTextWidth = 2 * CLASS_RADIUS;\r\n          break;\r\n        case 'union':\r\n        case 'intersection':\r\n        case 'complement':\r\n          radius = SPECIAL_OPERATIONS_RADIUS;\r\n          break;\r\n        case 'rdfsResource':\r\n        case 'thing':\r\n          radius = THING_RADIUS;\r\n          maxTextWidth = 2 * THING_RADIUS;\r\n          break;\r\n        case 'literal':\r\n        case 'datatype':\r\n          node.height = LITERAL_HEIGHT;\r\n          node.width = LITERAL_WIDTH;\r\n          maxTextWidth = LITERAL_WIDTH;\r\n          break;\r\n        default:\r\n      }\r\n      node.maxTextWidth = maxTextWidth;\r\n      node.radius = radius;\r\n    }\r\n\r\n    // Count multi edges and self links\r\n    json.links.forEach(function(link) {\r\n      var i = 0;\r\n      // Don't count multiple times the same source-target combination\r\n      if (isNaN(link.multiLinkCount)) {\r\n        var sameLinks = [];\r\n\r\n        // Search all links with the source and target\r\n        json.links.forEach(function(otherLink) {\r\n          if (\r\n            (link.source === otherLink.source && link.target === otherLink.target) ||\r\n            (link.target === otherLink.source && link.source === otherLink.target)\r\n          ) {\r\n            sameLinks.push(otherLink);\r\n          }\r\n        });\r\n\r\n        // Set the total amount and its index for every node\r\n        for (i = 0; i < sameLinks.length; i++) {\r\n          sameLinks[i].multiLinkCount = sameLinks.length;\r\n          sameLinks[i].multiLinkIndex = i;\r\n        }\r\n      }\r\n\r\n      if (isNaN(link.selfLinkCount)) {\r\n        var selfLinks = [];\r\n\r\n        json.links.forEach(function(otherLink) {\r\n          if (link.source === otherLink.source && link.target === otherLink.target) {\r\n            selfLinks.push(otherLink);\r\n          }\r\n        });\r\n\r\n        for (i = 0; i < selfLinks.length; i++) {\r\n          selfLinks[i].selfLinkCount = selfLinks.length;\r\n          selfLinks[i].selfLinkIndex = i;\r\n        }\r\n      }\r\n    });\r\n    refreshSlider();\r\n  };\r\n\r\n  /* Calculates the point where the link between the source and target node\r\n * intersects the border of the target node */\r\n  function calculateIntersection(source, target, additionalDistance) {\r\n    var dx = target.x - source.x,\r\n      dy = target.y - source.y,\r\n      innerDistance = target.radius;\r\n\r\n    if (target.type === 'literal' || target.type === 'datatype') {\r\n      var m_link = Math.abs(dy / dx),\r\n        m_rect = target.height / target.width;\r\n\r\n      if (m_link <= m_rect) {\r\n        var timesX = dx / (target.width / 2),\r\n          rectY = dy / timesX;\r\n        innerDistance = Math.sqrt(Math.pow(target.width / 2, 2) + rectY * rectY);\r\n      } else {\r\n        var timesY = dy / (target.height / 2),\r\n          rectX = dx / timesY;\r\n        innerDistance = Math.sqrt(Math.pow(target.height / 2, 2) + rectX * rectX);\r\n      }\r\n    }\r\n\r\n    var length = Math.sqrt(dx * dx + dy * dy),\r\n      ratio = (length - (innerDistance + additionalDistance)) / length,\r\n      x = dx * ratio + source.x,\r\n      y = dy * ratio + source.y;\r\n\r\n    return { x: x, y: y };\r\n  }\r\n\r\n  /* Adjusts the containers current scale and position */\r\n  function zoomed() {\r\n    svg.attr('transform', 'translate(' + d3.event.translate + ')scale(' + d3.event.scale + ')');\r\n  }\r\n\r\n  /* Calculate the visible link distance */\r\n  var calculateLinkDistance = function calculateLinkDistanceFunct(l, visibleLinkDistance) {\r\n    var distance = visibleLinkDistance;\r\n    distance += l.target.radius;\r\n    distance += l.source.radius;\r\n    return distance;\r\n  };\r\n\r\n  /* Returns the link distance of the passed link */\r\n  var getLinkDistance = function getLinkDistanceFunct(l) {\r\n    // Differentiate between class and literal nodes\r\n    if (l.source.type === 'literal' || l.target.type === 'literal' || l.source.type === 'datatype' || l.target.type === 'datatype') {\r\n      return calculateLinkDistance(l, visibleLiteralLinkDistance);\r\n    } else {\r\n      return calculateLinkDistance(l, visibleLinkDistance);\r\n    }\r\n  };\r\n\r\n  /* Refreshs the slider */\r\n  var refreshSlider = function refreshSliderFunct() {\r\n    if (linkDistanceClassSlider !== undefined) {\r\n      linkDistanceClassSlider.property('value', visibleLinkDistance);\r\n    }\r\n    if (linkDistanceClassLabel !== undefined) {\r\n      linkDistanceClassLabel.html(visibleLinkDistance);\r\n    }\r\n    if (linkDistanceLiteralSlider !== undefined) {\r\n      linkDistanceLiteralSlider.property('value', visibleLiteralLinkDistance);\r\n    }\r\n    if (linkDistanceLiteralLabel !== undefined) {\r\n      linkDistanceLiteralLabel.html(visibleLiteralLinkDistance);\r\n    }\r\n  };\r\n\r\n  /* Change linkDistance and charge */\r\n  var changeDistance = function changeDistanceFunct() {\r\n    // Convert newDistance to int\r\n    visibleLinkDistance = +linkDistanceClassSlider.property('value');\r\n    visibleLiteralLinkDistance = +linkDistanceLiteralSlider.property('value');\r\n\r\n    // Adjust charge and restart force layout\r\n    force.charge(getCharge());\r\n    force.start();\r\n\r\n    refreshSlider();\r\n  };\r\n  window.centerGraph = () => {\r\n    const interval = setInterval(changeDistance, 200);\r\n    setTimeout(() => {\r\n      clearInterval(interval);\r\n    }, 2000);\r\n  };\r\n\r\n  var getCharge = function getChargeFunct() {\r\n    var nodeCharge = (visibleLinkDistance / DEFAULT_VISIBLE_LINKDISTANCE) * CHARGE,\r\n      literalCharge = (visibleLiteralLinkDistance / DEFAULT_VISIBLE_LINKDISTANCE) * CHARGE;\r\n    return Math.min(nodeCharge, literalCharge);\r\n  };\r\n\r\n  /* Calculates the normal vector between two points */\r\n  function calculateNormalVector(source, target, length) {\r\n    var dx = target.x - source.x,\r\n      dy = target.y - source.y,\r\n      nx = -dy,\r\n      ny = dx,\r\n      vlength = Math.sqrt(nx * nx + ny * ny),\r\n      ratio = length / vlength;\r\n\r\n    return { x: nx * ratio, y: ny * ratio };\r\n  }\r\n\r\n  /* Calculates a point between two points for curves */\r\n  function calculateCurvePoint(source, target, l) {\r\n    var distance = calculateMultiLinkDistance(l),\r\n      // Find the center of the two points\r\n      dx = target.x - source.x,\r\n      dy = target.y - source.y,\r\n      cx = source.x + dx / 2,\r\n      cy = source.y + dy / 2,\r\n      n = calculateNormalVector(source, target, distance);\r\n\r\n    if (l.source.index < l.target.index) {\r\n      n.x = -n.x;\r\n      n.y = -n.y;\r\n    }\r\n\r\n    if (l.multiLinkIndex % 2 !== 0) {\r\n      n.x = -n.x;\r\n      n.y = -n.y;\r\n    }\r\n\r\n    return { x: cx + n.x, y: cy + n.y };\r\n  }\r\n\r\n  /* Calculate the optimal Multi Link distance */\r\n  function calculateMultiLinkDistance(l) {\r\n    var level = Math.floor((l.multiLinkIndex - (l.multiLinkCount % 2)) / 2) + 1,\r\n      oddConstant = (l.multiLinkCount % 2) * 15,\r\n      distance = 0;\r\n    switch (level) {\r\n      case 1:\r\n        distance = 20 + oddConstant;\r\n        break;\r\n      case 2:\r\n        distance = 45 + oddConstant;\r\n        break;\r\n      default:\r\n    }\r\n    return distance * (visibleLinkDistance / DEFAULT_VISIBLE_LINKDISTANCE);\r\n  }\r\n\r\n  /* Calculates the radian of an angle */\r\n  function calculateRadian(angle) {\r\n    angle = angle % 360;\r\n    if (angle < 0) {\r\n      angle = angle + 360;\r\n    }\r\n    var arc = (2 * Math.PI * angle) / 360;\r\n    if (arc < 0) {\r\n      arc = arc + 2 * Math.PI;\r\n    }\r\n    return arc;\r\n  }\r\n\r\n  /* Calculates links to itself and stores the point for the labels. Currently only working for circle nodes! */\r\n  function calculateSelfLinkPath(l) {\r\n    var node = l.source,\r\n      loopShiftAngle = 360 / l.selfLinkCount,\r\n      loopAngle = Math.min(60, loopShiftAngle * 0.8),\r\n      arcFrom = calculateRadian(loopShiftAngle * l.selfLinkIndex),\r\n      arcTo = calculateRadian(loopShiftAngle * l.selfLinkIndex + loopAngle),\r\n      x1 = Math.cos(arcFrom) * node.radius,\r\n      y1 = Math.sin(arcFrom) * node.radius,\r\n      x2 = Math.cos(arcTo) * node.radius,\r\n      y2 = Math.sin(arcTo) * node.radius,\r\n      fixPoint1 = { x: node.x + x1, y: node.y + y1 },\r\n      fixPoint2 = { x: node.x + x2, y: node.y + y2 },\r\n      distanceMultiplier = 2.5,\r\n      dx = ((x1 + x2) / 2) * distanceMultiplier,\r\n      dy = ((y1 + y2) / 2) * distanceMultiplier,\r\n      curvePoint = { x: node.x + dx, y: node.y + dy };\r\n    l.curvePoint = curvePoint;\r\n\r\n    return loopFunction([fixPoint1, curvePoint, fixPoint2]);\r\n  }\r\n\r\n  /* ################ MARKERS ################ */\r\n\r\n  /* Returns an id to get the marker to the matching link */\r\n  function getMarkerId(l, inverse) {\r\n    return (l.type ? l.type : 'normal') + l.id + (inverse ? 'inverse' : '');\r\n  }\r\n\r\n  /* Function that adds markers according to the used links */\r\n  function addMarker(defs, link, inverse) {\r\n    defs\r\n      .append('marker')\r\n      .attr('id', getMarkerId(link, inverse))\r\n      .attr('viewBox', '0 -8 14 16')\r\n      .attr('refX', inverse ? 0 : 12)\r\n      .attr('refY', 0)\r\n      .attr('markerWidth', 12) // ArrowSize\r\n      .attr('markerHeight', 12)\r\n      .attr('markerUnits', 'userSpaceOnUse')\r\n      .attr('orient', 'auto') // Orientation of Arrow\r\n      .attr('class', (link.type ? link.type : 'normal') + 'Marker')\r\n      .append('path')\r\n      .attr('d', function() {\r\n        return inverse ? 'M12,-8L0,0L12,8Z' : 'M0,-8L12,0L0,8Z';\r\n      });\r\n  }\r\n\r\n  /* Methods to create hover effect for the specification */\r\n  // eslint-disable-next-line\r\n  function labelMouseOver(tag) {\r\n    d3.selectAll('marker#' + tag)\r\n      .select('path')\r\n      .classed('hovered', true);\r\n\r\n    d3.selectAll('.' + tag)\r\n      .selectAll('path, text')\r\n      .classed('hovered', true);\r\n  }\r\n  // eslint-disable-next-line\r\n  function labelMouseOut(tag) {\r\n    d3.selectAll('marker#' + tag)\r\n      .select('path')\r\n      .classed('hovered', false);\r\n\r\n    d3.selectAll('.' + tag)\r\n      .selectAll('path, text')\r\n      .classed('hovered', false);\r\n  }\r\n  // eslint-disable-next-line\r\n  function indirectHighlightOn(tag) {\r\n    d3.selectAll('.' + tag)\r\n      .selectAll('rect')\r\n      .classed('indirectHighlighting', true);\r\n  }\r\n  // eslint-disable-next-line\r\n  function indirectHighlightOff(tag) {\r\n    d3.selectAll('.' + tag)\r\n      .selectAll('rect')\r\n      .classed('indirectHighlighting', false);\r\n  }\r\n\r\n  /* Highlights the marker and link for the given label and direction */\r\n  function labelMouseEnter(linkData, direction) {\r\n    var inverse = direction === 'from';\r\n\r\n    d3.selectAll('marker#' + getMarkerId(linkData, inverse))\r\n      .select('path')\r\n      .classed('hovered', true);\r\n\r\n    d3.selectAll('.' + getMarkerId(linkData, inverse))\r\n      .selectAll('path, text')\r\n      .classed('hovered', true);\r\n\r\n    svg.selectAll('.label').sort(function(a, b) {\r\n      // select the parent and sort the path's\r\n      if (a.id === linkData.id && b.id !== linkData.id) {\r\n        return 1; // a is hovered\r\n      } else if (a.id !== linkData.id && b.id === linkData.id) {\r\n        return -1; // b is hovered\r\n      } else {\r\n        // workaround to make sorting in chrome for these elements stable\r\n        return a.id - b.id; // compare unique values\r\n      }\r\n    });\r\n  }\r\n\r\n  /* Removes highlighting of marker and link for the given label and direction */\r\n  function labelMouseLeave(linkData, direction) {\r\n    var inverse = direction === 'from';\r\n    d3.selectAll('marker#' + getMarkerId(linkData, inverse))\r\n      .select('path')\r\n      .classed('hovered', false);\r\n\r\n    d3.selectAll('.' + getMarkerId(linkData, inverse))\r\n      .selectAll('path, text')\r\n      .classed('hovered', false);\r\n  }\r\n\r\n  /* Function to add rectangles as label background */\r\n  function addLabelRect(label, data, direction) {\r\n    label\r\n      .append('rect')\r\n      .attr('class', function() {\r\n        var property = data.propertyTo;\r\n        if (direction === 'from') {\r\n          property = data.propertyFrom;\r\n        }\r\n        return property ? property : 'object';\r\n      })\r\n      .classed('property', true)\r\n      .attr('x', -LABEL_WIDTH / 2)\r\n      .attr('y', -LABEL_HEIGHT / 2)\r\n      .attr('width', LABEL_WIDTH)\r\n      .attr('height', LABEL_HEIGHT)\r\n      .on('mouseenter', function(linkData) {\r\n        labelMouseEnter(linkData, direction);\r\n        highlightSubproperties(linkData, direction, true);\r\n      })\r\n      .on('mouseleave', function(linkData) {\r\n        labelMouseLeave(linkData, direction);\r\n        highlightSubproperties(linkData, direction, false);\r\n      });\r\n  }\r\n\r\n  /* Add the label to a link in the given direction */\r\n  function addLabel(link, data, direction) {\r\n    var label = link\r\n      .append('g')\r\n      .attr('id', 'label' + data.id + direction)\r\n      .classed(direction, true);\r\n\r\n    addLabelRect(label, data, direction);\r\n    if (data.propertyTo === 'disjoint') {\r\n      addDisjointLabel(label);\r\n      return;\r\n    }\r\n    var labelText = label\r\n      .append('text')\r\n      .classed('text', true)\r\n      .attr('text-anchor', 'middle');\r\n\r\n    addLabelText(labelText, data, direction);\r\n    addPropertyToLabel(labelText, data, direction);\r\n    addSubPropertyLabel(labelText, data, direction);\r\n  }\r\n\r\n  /* Adds a new <tspan> to the label */\r\n  function addLabelText(element, d, direction) {\r\n    element\r\n      .append('tspan')\r\n      .attr('class', function() {\r\n        // If no type in any direction default class \"text\"\r\n        var classConst = '';\r\n\r\n        if (d.typeTo !== undefined || d.typeFrom !== undefined) {\r\n          classConst = classConst.concat('mainText');\r\n        } else {\r\n          classConst = classConst.concat('text');\r\n        }\r\n\r\n        /* Adds additional classes according to the properties. */\r\n        switch (d.propertyTo) {\r\n          case 'external':\r\n            classConst = classConst.concat(' white');\r\n            return classConst;\r\n          default:\r\n        }\r\n\r\n        switch (d.propertyFrom) {\r\n          case 'external':\r\n            classConst = classConst.concat(' white');\r\n            return classConst;\r\n          default:\r\n        }\r\n\r\n        return classConst;\r\n      })\r\n      .text(function() {\r\n        var value;\r\n        if (direction === 'to') {\r\n          value = d.valueTo;\r\n        } else if (direction === 'from') {\r\n          value = d.valueFrom;\r\n        } else {\r\n          value = d.valueTo ? d.valueTo : d.valueFrom;\r\n        }\r\n        return value.toString().truncate(LABEL_WIDTH);\r\n      });\r\n  }\r\n\r\n  /* Adds a new <tspan> to the existing <text> in the label position */\r\n  function addPropertyToLabel(label, d, direction) {\r\n    var property;\r\n    if (direction === 'to') {\r\n      if (!d.typeTo) {\r\n        return;\r\n      }\r\n      property = d.typeTo;\r\n    } else if (direction === 'from') {\r\n      if (!d.typeFrom) {\r\n        return;\r\n      }\r\n      property = d.typeFrom;\r\n    } else {\r\n      var anyProperty = d.typeTo ? d.typeTo : d.typeFrom;\r\n      if (anyProperty) {\r\n        property = anyProperty;\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Insert the brackets at the beginning for receiving the correct length\r\n    var trimmedPropertyText = ')(' + property.toString().truncate(LABEL_WIDTH, 'subtext');\r\n    label\r\n      .append('tspan')\r\n      .attr('x', 0)\r\n      .attr('y', 9)\r\n      .attr('class', 'subtext')\r\n      .text('(' + trimmedPropertyText.substr(2) + ')');\r\n  }\r\n\r\n  /* Adds a new <tspan> to the existing <text> in the label position */\r\n  function addSubPropertyLabel(label, d, direction) {\r\n    var subProperty;\r\n    if (direction === 'to') {\r\n      if (!d.equivPropTo) {\r\n        return;\r\n      }\r\n      subProperty = d.equivPropTo;\r\n    } else if (direction === 'from') {\r\n      if (!d.subPropFrom) {\r\n        return;\r\n      }\r\n      subProperty = d.subPropFrom;\r\n    } else {\r\n      var anyProperty = d.equivPropTo ? d.equivPropTo : d.subPropFrom;\r\n      if (anyProperty) {\r\n        subProperty = anyProperty;\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Insert the brackets at the beginning for receiving the correct length\r\n    var trimmedPropertyText = '][' + subProperty.toString().truncate(LABEL_WIDTH, 'subtext');\r\n    label\r\n      .append('tspan')\r\n      .attr('x', 0)\r\n      .attr('y', 9)\r\n      .attr('class', 'subtext')\r\n      .text('[' + trimmedPropertyText.substr(2) + ']');\r\n  }\r\n\r\n  function addDisjointLabel(label) {\r\n    label\r\n      .append('circle')\r\n      .classed('symbol', true)\r\n      .classed('fineline', true)\r\n      .attr('cx', -12.5)\r\n      .attr('r', 10);\r\n    label\r\n      .append('circle')\r\n      .classed('symbol', true)\r\n      .classed('fineline', true)\r\n      .attr('cx', 12.5)\r\n      .attr('r', 10);\r\n\r\n    var text = label\r\n      .append('text')\r\n      .classed('text', true)\r\n      .attr('text-anchor', 'middle')\r\n      .attr('transform', 'translate(0,20)');\r\n    text\r\n      .append('tspan')\r\n      .classed('subtext', true)\r\n      .text('(disjoint)');\r\n  }\r\n\r\n  function addCardinality(link, direction) {\r\n    var card = link\r\n      .append('g')\r\n      .attr('class', function(l) {\r\n        return getMarkerId(l, direction === 'to');\r\n      })\r\n      .classed(direction, true);\r\n\r\n    card\r\n      .append('text')\r\n      .classed('cardinality', true)\r\n      .attr('text-anchor', 'middle')\r\n      .text(function(d) {\r\n        return direction === 'to' ? d.cardTo : d.cardFrom;\r\n      });\r\n  }\r\n\r\n  /* Adds a new line of text to the element. */\r\n  function addTextline(element, word, additionalClass) {\r\n    if (element === undefined || word === undefined) {\r\n      return;\r\n    }\r\n    element\r\n      .append('tspan')\r\n      .attr('class', additionalClass)\r\n      .classed('text', true)\r\n      .attr('x', 0)\r\n      .attr('y', function() {\r\n        return (element.property('childNodes').length - 1) * SPACE_BETWEEN_SPANS;\r\n      })\r\n      .text(word);\r\n  }\r\n\r\n  /* Adds a new line of text to the element. */\r\n  function addSubTextNode(element, word, additionalClass) {\r\n    if (element === undefined || word === undefined) {\r\n      return;\r\n    }\r\n    element\r\n      .append('tspan')\r\n      .attr('class', additionalClass)\r\n      .classed('text', true)\r\n      .classed('subtext', true)\r\n      .attr('x', 0)\r\n      .attr('y', function() {\r\n        return (element.property('childNodes').length - 1) * SPACE_BETWEEN_SPANS;\r\n      })\r\n      .text(word);\r\n  }\r\n\r\n  /*Adds <text> block to element. */\r\n  function addTextBlock(element) {\r\n    element\r\n      .append('text')\r\n      .classed('text', true)\r\n      .attr('text-anchor', 'middle');\r\n  }\r\n\r\n  /* Adds new literal. */\r\n  function addLiteral(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    if (data !== undefined) {\r\n      element\r\n        .append('rect')\r\n        .attr('class', data.type)\r\n        .classed('class', true)\r\n        .classed('special', true)\r\n        .attr('x', -LITERAL_WIDTH / 2)\r\n        .attr('y', -LITERAL_HEIGHT / 2)\r\n        .attr('width', LITERAL_WIDTH)\r\n        .attr('height', LITERAL_HEIGHT);\r\n    } else {\r\n      element\r\n        .append('rect')\r\n        .attr('class', 'literal')\r\n        .classed('class', true)\r\n        .attr('x', -LITERAL_WIDTH / 2)\r\n        .attr('y', -LITERAL_HEIGHT / 2)\r\n        .attr('width', LITERAL_WIDTH)\r\n        .attr('height', LITERAL_HEIGHT);\r\n    }\r\n\r\n    // Adds text\r\n    addTextBlock(element);\r\n    if (data !== undefined) {\r\n      addTextline(element.select('text'), data.name.truncate(data.maxTextWidth));\r\n    } else {\r\n      addTextline(element.select('text'), 'Literal');\r\n    }\r\n  }\r\n\r\n  /* Adds new literal. */\r\n  function addDatatype(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    if (data !== undefined) {\r\n      element\r\n        .append('rect')\r\n        .attr('class', data.type)\r\n        .classed('class', true)\r\n        .attr('x', -LITERAL_WIDTH / 2)\r\n        .attr('y', -LITERAL_HEIGHT / 2)\r\n        .attr('width', LITERAL_WIDTH)\r\n        .attr('height', LITERAL_HEIGHT);\r\n    } else {\r\n      element\r\n        .append('rect')\r\n        .attr('class', 'datatype')\r\n        .classed('class', true)\r\n        .attr('x', -LITERAL_WIDTH / 2)\r\n        .attr('y', -LITERAL_HEIGHT / 2)\r\n        .attr('width', LITERAL_WIDTH)\r\n        .attr('height', LITERAL_HEIGHT);\r\n    }\r\n\r\n    // Adds text\r\n    addTextBlock(element);\r\n    if (data !== undefined) {\r\n      addTextline(element.select('text'), data.name.truncate(data.maxTextWidth));\r\n    } else {\r\n      addTextline(element.select('text'), 'Datatype');\r\n    }\r\n  }\r\n\r\n  /* Appends thing node. */\r\n  function addThing(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    // If element has data, normally in the force-directed graph.\r\n    if (data !== undefined) {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'class')\r\n        .classed('white', true)\r\n        .classed('special', true)\r\n        .attr('r', function() {\r\n          return data.radius;\r\n        });\r\n    }\r\n    // If no data exists, justs to make a prototype without functions.\r\n    else {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'class')\r\n        .classed('white', true)\r\n        .classed('special', true)\r\n        .attr('r', THING_RADIUS);\r\n    }\r\n    // Adds text\r\n    addTextBlock(element);\r\n    if (data !== undefined) {\r\n      addTextline(element.select('text'), data.name.truncate(data.maxTextWidth));\r\n    } else {\r\n      addTextline(element.select('text'), 'Thing');\r\n    }\r\n  }\r\n\r\n  /* Appends rdfs:Resource node. */\r\n  function addRDFSResource(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    // If element has data, normally in the force-directed graph.\r\n    if (data !== undefined) {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'class')\r\n        .classed('rdf', true)\r\n        .classed('special', true)\r\n        .attr('r', function() {\r\n          return data.radius;\r\n        });\r\n    }\r\n    // If no data exists, justs to make a prototype without functions.\r\n    else {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'class')\r\n        .classed('rdf', true)\r\n        .classed('special', true)\r\n        .attr('r', THING_RADIUS);\r\n    }\r\n    // Adds text\r\n    addTextBlock(element);\r\n    if (data !== undefined) {\r\n      addTextline(element.select('text'), data.name.truncate(data.maxTextWidth));\r\n    } else {\r\n      addTextline(element.select('text'), 'Resource');\r\n    }\r\n  }\r\n\r\n  /* Appends class node. */\r\n  function addClass(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    // If element has data, normally in the force-directed graph.\r\n    if (data !== undefined) {\r\n      element\r\n        .append('circle')\r\n        .attr('class', data.type)\r\n        .attr('r', function() {\r\n          return data.radius;\r\n        });\r\n    }\r\n    // If no data exists, justs to make a prototype without functions.\r\n    else {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'class')\r\n        .attr('r', CLASS_RADIUS);\r\n    }\r\n    // Adds text\r\n    addTextBlock(element);\r\n    if (data !== undefined) {\r\n      const iriParts = data.name.split('/');\r\n      iriParts.forEach((iriPart, index) => {\r\n        addTextline(element.select('text'), iriPart + (index < iriParts.length - 1 ? '/' : ''));\r\n      });\r\n      element.append(\"title\").text(data.fullName + ' -- ' + data.uri);\r\n    } else {\r\n      addTextline(element.select('text'), 'Class');\r\n    }\r\n  }\r\n\r\n  /* Appends rdfs:class node. */\r\n  function addRDFSClass(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    // If element has data, normally in the force-directed graph.\r\n    if (data !== undefined) {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'class')\r\n        .classed('rdf', true)\r\n        .attr('r', function() {\r\n          return data.radius;\r\n        });\r\n    }\r\n    // If no data exists, justs to make a prototype without functions.\r\n    else {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'rdf')\r\n        .classed('rdf', true)\r\n        .attr('r', CLASS_RADIUS);\r\n    }\r\n    // Adds text\r\n    addTextBlock(element);\r\n    if (data !== undefined) {\r\n      addTextline(element.select('text'), data.name.truncate(data.maxTextWidth));\r\n      element.append(\"title\").text(data.fullName + ' -- ' + data.uri);\r\n    } else {\r\n      addTextline(element.select('text'), 'Class');\r\n    }\r\n  }\r\n\r\n  /* Appends equivalentClass node. */\r\n  function addEquivalentClass(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    // If element has data, normally in the force-directed graph.\r\n    if (data !== undefined) {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'class white embedded')\r\n        .attr('r', data.radius);\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'class')\r\n        .attr('r', function() {\r\n          return data.radius - 4;\r\n        });\r\n    }\r\n    // If no data exists, justs to make a prototype without functions.\r\n    else {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'class')\r\n        .attr('r', CLASS_RADIUS - 4);\r\n\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'link')\r\n        .attr('r', CLASS_RADIUS);\r\n    }\r\n    // Adds text\r\n    addTextBlock(element);\r\n    if (data !== undefined) {\r\n      addTextline(element.select('text'), data.name.truncate(data.maxTextWidth));\r\n\r\n      var equivNames = data.equivalentClasses.map(function(node) {\r\n          return node.name;\r\n        }),\r\n        equivNamesString = equivNames.join(', ');\r\n      addSubTextNode(element.select('text'), '[' + equivNamesString.truncate(data.maxTextWidth) + ']');\r\n    } else {\r\n      addTextline(element.select('text'), 'EquivalentClass');\r\n    }\r\n\r\n    // Center the complete textblock.\r\n    var rePositiony = ((element.select('text').property('childElementCount') - 1) * SPACE_BETWEEN_SPANS) / 2;\r\n    element.select('text').attr('transform', function() {\r\n      return 'translate(0,-' + rePositiony + ')';\r\n    });\r\n  }\r\n\r\n  /* Appends externalClass node.*/\r\n  function addExternalClass(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    // If element has data, normally in the force-directed graph.\r\n    if (data !== undefined) {\r\n      element\r\n        .append('circle')\r\n        .attr('class', data.type)\r\n        .classed('class', true)\r\n        .attr('r', function() {\r\n          return data.radius;\r\n        });\r\n    }\r\n    // If no data exists, justs to make a prototype without functions.\r\n    else {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'external')\r\n        .classed('class', true)\r\n        .attr('r', CLASS_RADIUS);\r\n    }\r\n    // Adds text\r\n    addTextBlock(element);\r\n    if (data !== undefined) {\r\n      addTextline(element.select('text'), data.name.truncate(data.maxTextWidth), 'white');\r\n    } else {\r\n      addTextline(element.select('text'), 'External', 'white');\r\n    }\r\n    addSubTextNode(element.select('text'), '(external)', 'white');\r\n\r\n    // Center the complete textblock.\r\n    var rePositiony = ((element.select('text').property('childElementCount') - 1) * SPACE_BETWEEN_SPANS) / 2;\r\n    element.select('text').attr('transform', function() {\r\n      return 'translate(0,-' + rePositiony + ')';\r\n    });\r\n  }\r\n\r\n  /* Appends deprecatedClass node.*/\r\n  function addDeprecatedClass(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    // If element has data, normally in the force-directed graph.\r\n    if (data !== undefined) {\r\n      element\r\n        .append('circle')\r\n        .attr('class', data.type)\r\n        .classed('class', true)\r\n        .attr('r', function() {\r\n          return data.radius;\r\n        });\r\n    }\r\n    // If no data exists, justs to make a prototype without functions.\r\n    else {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'deprecated')\r\n        .classed('class', true)\r\n        .attr('r', CLASS_RADIUS);\r\n    }\r\n    // Adds text\r\n    addTextBlock(element);\r\n    if (data !== undefined) {\r\n      addTextline(element.select('text'), data.name.truncate(data.maxTextWidth));\r\n    } else {\r\n      addTextline(element.select('text'), 'Deprecated');\r\n    }\r\n    addSubTextNode(element.select('text'), '(deprecated)');\r\n\r\n    // Center the complete textblock.\r\n    var rePositiony = ((element.select('text').property('childElementCount') - 1) * SPACE_BETWEEN_SPANS) / 2;\r\n    element.select('text').attr('transform', function() {\r\n      return 'translate(0,-' + rePositiony + ')';\r\n    });\r\n  }\r\n\r\n  /* Appends intersectionClass node.*/\r\n  function addIntersectionClass(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    // If element has data, normally in the force-directed graph.\r\n    if (data !== undefined) {\r\n      element\r\n        .append('circle')\r\n        .attr('class', data.type)\r\n        .classed('class', true)\r\n        .classed('special', true)\r\n        .attr('r', function() {\r\n          return data.radius;\r\n        });\r\n    }\r\n    // If no data exists, justs to make a prototype without functions.\r\n    else {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'intersection')\r\n        .classed('class', true)\r\n        .classed('special', true)\r\n        .attr('r', SPECIAL_OPERATIONS_RADIUS);\r\n    }\r\n    var symbol = element.append('g').classed('embedded', true);\r\n\r\n    symbol\r\n      .append('path')\r\n      .attr('class', 'nostroke')\r\n      .classed('symbol', true)\r\n      .attr(\r\n        'd',\r\n        'm 24.777,0.771 c0,16.387-13.607,23.435-19.191,23.832S-15.467,14.526-15.467,0.424S-1.216-24.4,5.437-24.4 C12.09-24.4,24.777-15.616,24.777,0.771z'\r\n      );\r\n    symbol\r\n      .append('circle')\r\n      .attr('class', 'nofill')\r\n      .classed('fineline', true)\r\n      .attr('r', SPECIAL_OPERATIONS_RADIUS - 15);\r\n    symbol\r\n      .append('circle')\r\n      .attr('cx', 10)\r\n      .attr('class', 'nofill')\r\n      .classed('fineline', true)\r\n      .attr('r', SPECIAL_OPERATIONS_RADIUS - 15);\r\n    symbol\r\n      .append('path')\r\n      .attr('class', 'nofill')\r\n      .attr('d', 'm 9,5 c 0,-2 0,-4 0,-6 0,0 0,0 0,0 0,0 0,-1.8 -1,-2.3 -0.7,-0.6 -1.7,-0.8 -2.9,-0.8 -1.2,0 -2,0 -3,0.8 -0.7,0.5 -1,1.4 -1,2.3 0,2 0,4 0,6');\r\n    symbol.attr('transform', 'translate(-' + (SPECIAL_OPERATIONS_RADIUS - 15) / 5 + ',-' + (SPECIAL_OPERATIONS_RADIUS - 15) / 100 + ')');\r\n  }\r\n\r\n  /* Appends unionClass node.*/\r\n  function addUnionClass(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    // If element has data, normally in the force-directed graph.\r\n    if (data !== undefined) {\r\n      element\r\n        .append('circle')\r\n        .attr('class', data.type)\r\n        .classed('class', true)\r\n        .classed('special', true)\r\n        .attr('r', function() {\r\n          return data.radius;\r\n        });\r\n    }\r\n    // If no data exists, justs to make a prototype without functions.\r\n    else {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'union')\r\n        .classed('class', true)\r\n        .classed('special', true)\r\n        .attr('r', SPECIAL_OPERATIONS_RADIUS);\r\n    }\r\n    var symbol = element.append('g').classed('embedded', true);\r\n\r\n    symbol\r\n      .append('circle')\r\n      .attr('class', 'symbol')\r\n      .attr('r', SPECIAL_OPERATIONS_RADIUS - 15);\r\n    symbol\r\n      .append('circle')\r\n      .attr('cx', 10)\r\n      .attr('class', 'symbol')\r\n      .classed('fineline', true)\r\n      .attr('r', SPECIAL_OPERATIONS_RADIUS - 15);\r\n    symbol\r\n      .append('circle')\r\n      .attr('class', 'nofill')\r\n      .classed('fineline', true)\r\n      .attr('r', SPECIAL_OPERATIONS_RADIUS - 15);\r\n    symbol\r\n      .append('path')\r\n      .attr('class', 'link')\r\n      .attr('d', 'm 1,-3 c 0,2 0,4 0,6 0,0 0,0 0,0 0,2 2,3 4,3 2,0 4,-1 4,-3 0,-2 0,-4 0,-6');\r\n    symbol.attr('transform', 'translate(-' + (SPECIAL_OPERATIONS_RADIUS - 15) / 5 + ',-' + (SPECIAL_OPERATIONS_RADIUS - 15) / 100 + ')');\r\n  }\r\n\r\n  /* Appends complementClass node.*/\r\n  function addComplementClass(element, data) {\r\n    if (element === undefined) {\r\n      return;\r\n    }\r\n\r\n    // If element has data, normally in the force-directed graph.\r\n    if (data !== undefined) {\r\n      element\r\n        .append('circle')\r\n        .attr('class', data.type)\r\n        .classed('class', true)\r\n        .classed('special', true)\r\n        .attr('r', function() {\r\n          return data.radius;\r\n        });\r\n    }\r\n    // If no data exists, justs to make a prototype without functions.\r\n    else {\r\n      element\r\n        .append('circle')\r\n        .attr('class', 'complement')\r\n        .classed('class', true)\r\n        .classed('special', true)\r\n        .attr('r', SPECIAL_OPERATIONS_RADIUS);\r\n    }\r\n    var symbol = element.append('g').classed('embedded', true);\r\n\r\n    symbol\r\n      .append('circle')\r\n      .attr('class', 'symbol')\r\n      .classed('fineline', true)\r\n      .attr('r', SPECIAL_OPERATIONS_RADIUS - 15);\r\n    symbol\r\n      .append('path')\r\n      .attr('class', 'nofill')\r\n      .attr('d', 'm -7,-1.5 12,0 0,6');\r\n    symbol.attr('transform', 'translate(-' + (SPECIAL_OPERATIONS_RADIUS - 15) / 100 + ',-' + (SPECIAL_OPERATIONS_RADIUS - 15) / 100 + ')');\r\n  }\r\n\r\n  /* Returns the type of the selected element, either node or label. */\r\n  var getKindOfElement = function getKindOfElementFunct(element) {\r\n    if (element.classed('node')) {\r\n      return 'node';\r\n    }\r\n\r\n    var theParent = element.node().parentNode;\r\n    if (theParent !== undefined && d3.select(theParent).classed('label')) {\r\n      return 'label';\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n\r\n  /* Toggles the highlighting of the given node. */\r\n  var toggleNodeFocus = function toggleNodeFocusFunct(node) {\r\n    var firstChildElement = node.select('*'),\r\n      hasFocusClass = firstChildElement.classed('focused');\r\n\r\n    if (hasFocusClass) {\r\n      firstChildElement.classed('focused', false);\r\n    } else {\r\n      firstChildElement.classed('focused', true);\r\n    }\r\n  };\r\n\r\n  /* Toggles the highlighting of the given label. */\r\n  var toggleLabelFocus = function toggleLabelFocusFunct(labelToHigh) {\r\n    var inverse = labelToHigh.classed('from'),\r\n      rectOfNode = labelToHigh.select('rect'),\r\n      notHasFocusClass = !rectOfNode.classed('focused');\r\n\r\n    rectOfNode.classed('focused', notHasFocusClass);\r\n\r\n    d3.selectAll('marker#' + getMarkerId(labelToHigh.datum(), inverse))\r\n      .select('path')\r\n      .classed('focused', notHasFocusClass);\r\n\r\n    d3.selectAll('.' + getMarkerId(labelToHigh.datum(), inverse))\r\n      .selectAll('path, text')\r\n      .classed('focused', notHasFocusClass);\r\n  };\r\n\r\n  /* Sets focus on the clicked element. */\r\n  var focusOnElement = function focusOnElementFunct(element) {\r\n    var lastFocusedElement,\r\n      currentNode = element.node();\r\n\r\n    // Remove highlighting of last element if exists.\r\n    if (lastFocusedNode !== undefined) {\r\n      lastFocusedElement = d3.select(lastFocusedNode);\r\n      var kindOfLastElement = getKindOfElement(lastFocusedElement);\r\n\r\n      if (kindOfLastElement === 'node') {\r\n        toggleNodeFocus(lastFocusedElement);\r\n      } else if (kindOfLastElement === 'label') {\r\n        toggleLabelFocus(lastFocusedElement);\r\n      }\r\n    }\r\n\r\n    // If the same element was clicked before, not highlighting again.\r\n    if (lastFocusedNode === currentNode) {\r\n      hideInfoField();\r\n      lastFocusedNode = undefined;\r\n      return;\r\n    }\r\n    lastFocusedNode = currentNode;\r\n\r\n    var kindOfThisElement = getKindOfElement(element);\r\n\r\n    if (kindOfThisElement === 'node') {\r\n      toggleNodeFocus(element);\r\n    } else if (kindOfThisElement === 'label') {\r\n      toggleLabelFocus(element);\r\n    }\r\n  };\r\n\r\n  var getNodeInfo = function getNodeInfoFunct() {\r\n    // eslint-disable-next-line\r\n    var node = svg.selectAll('.node').on('click', function(d) {\r\n      d3.select('#otherDetails').classed('hidden', false);\r\n      d3.select('#class').classed('hidden', false);\r\n      d3.select('#prop').classed('hidden', true);\r\n\r\n      setUriLabel(d3.select('#name'), d.name, d.uri);\r\n\r\n      var equivUriSpan = d3.select('#classEquivUri');\r\n\r\n      if (equivUriSpan.node() === null) {\r\n        /*\r\n                    Do absolutely nothing -- this is for specVOWL.js\r\n                    Otherwise typeError null\r\n                */\r\n      } else {\r\n        var equivUriSpanParent = d3.select(equivUriSpan.node().parentNode);\r\n        if (d.equivalentClasses !== undefined) {\r\n          listUriLabels(equivUriSpan, d.equivalentClasses);\r\n          equivUriSpanParent.classed('hidden', false);\r\n        } else {\r\n          equivUriSpanParent.classed('hidden', true);\r\n        }\r\n      }\r\n      d3.select('#typeNode').text(getTypeNode(d.type));\r\n\r\n      var disjointNodes = d3.select('#disjointNodes');\r\n      if (equivUriSpan.node() === null) {\r\n        /*\r\n                    Do absolutely nothing -- this is for specVOWL.js\r\n                    Otherwise typeError null\r\n                */\r\n      } else {\r\n        var disjointNodesParent = d3.select(disjointNodes.node().parentNode);\r\n        if (d.disjoints !== undefined) {\r\n          listUriLabels(disjointNodes, d.disjoints);\r\n          disjointNodesParent.classed('hidden', false);\r\n        } else {\r\n          disjointNodesParent.classed('hidden', true);\r\n        }\r\n      }\r\n\r\n      focusOnElement(d3.select(this));\r\n    });\r\n  };\r\n\r\n  /* Sets a listing of uri labels of the passed array of nodes */\r\n  var listUriLabels = function listUriLabelsFunct(element, nodes) {\r\n    element.selectAll('*').remove();\r\n    nodes.forEach(function(node, index) {\r\n      if (index > 0) {\r\n        element.append('span').text(', ');\r\n      }\r\n      appendUriLabel(element, node.name, node.uri);\r\n    });\r\n  };\r\n\r\n  /* Removes all existing child elements and appends an uri label */\r\n  var setUriLabel = function setUriLabelFunct(element, name, uri) {\r\n    element.selectAll('*').remove();\r\n    appendUriLabel(element, name, uri);\r\n  };\r\n\r\n  /* Appends a field containing the name and if existing a hyperlink to the set uri */\r\n  var appendUriLabel = function appendUriLabelFunct(element, name, uri) {\r\n    var tag;\r\n    if (uri) {\r\n      tag = element.append('a').attr('href', uri);\r\n    } else {\r\n      tag = element.append('span');\r\n    }\r\n    tag.text(name);\r\n  };\r\n\r\n  var getTypeNode = function(type) {\r\n    switch (type) {\r\n      case 'class':\r\n        return 'OWL Class';\r\n      case 'thing':\r\n        return 'Thing';\r\n      case 'external':\r\n        return 'External Class';\r\n      case 'equivalent':\r\n        return 'Equivalent Class';\r\n      case 'deprecated':\r\n        return 'Deprecated Class';\r\n      case 'rdfsClass':\r\n        return 'RDFS Class';\r\n      case 'rdfsResource':\r\n        return 'RDFS Resource';\r\n      case 'literal':\r\n        return 'Literal';\r\n      case 'datatype':\r\n        return 'Datatype';\r\n      case 'union':\r\n        return 'Union Of';\r\n      case 'intersection':\r\n        return 'Intersection Of';\r\n      case 'complement':\r\n        return 'Complement Of';\r\n      default:\r\n    }\r\n  };\r\n\r\n  var getTypeLink = function(type) {\r\n    switch (type) {\r\n      case 'object':\r\n        return 'Object Property';\r\n      case 'datatype':\r\n        return 'Datatype Property';\r\n      case 'rdf':\r\n        return 'RDF Property';\r\n      case 'deprecated':\r\n        return 'Deprecated Property';\r\n      case 'external':\r\n        return 'External Property';\r\n      case 'disjoint':\r\n        return 'Disjoint With';\r\n      case 'subclass':\r\n        return 'Subclass of';\r\n      default:\r\n        return 'Object Property';\r\n    }\r\n  };\r\n\r\n  var getLinkInfo = function getLinkInfoFunct() {\r\n    /* We have to separate \"from\" labels by their class, because the stored data\r\n       is the data of the link which is identical in both directions */\r\n    svg.selectAll('.label .from').on('click', function(l) {\r\n      hideNodeInfoFields();\r\n      setUriLabel(d3.select('#propname'), l.valueFrom, l.uriFrom);\r\n      d3.select('#typeProp').text(getTypeLink(l.propertyFrom));\r\n\r\n      if (l.inverse === true) {\r\n        d3.select('#inverse').style('display', 'block');\r\n        setUriLabel(d3.select('#inverse span'), l.valueTo, l.uriTo);\r\n      } else {\r\n        d3.select('#inverse').style('display', 'none');\r\n      }\r\n      if (l.cardTo !== undefined) {\r\n        d3.select('#minCardinality').style('display', 'block');\r\n        d3.select('#minCardinality span').text(l.cardFrom);\r\n      } else {\r\n        d3.select('#minCardinality').style('display', 'none');\r\n      }\r\n      if (l.cardFrom !== undefined) {\r\n        d3.select('#maxCardinality').style('display', 'block');\r\n        d3.select('#maxCardinality span').text(l.cardTo);\r\n      } else {\r\n        d3.select('#maxCardinality').style('display', 'none');\r\n      }\r\n      //d3.select(\"#inverse\").text(l.valueTo);\r\n      setUriLabel(d3.select('#domain'), l.target.name, l.target.uri);\r\n      setUriLabel(d3.select('#range'), l.source.name, l.source.uri);\r\n\r\n      focusOnElement(d3.select(this));\r\n    });\r\n\r\n    svg.selectAll('.label .to').on('click', function(l) {\r\n      hideNodeInfoFields();\r\n      setUriLabel(d3.select('#propname'), l.valueTo, l.uriTo);\r\n      d3.select('#typeProp').text(getTypeLink(l.propertyTo));\r\n\r\n      if (l.inverse === true) {\r\n        d3.select('#inverse').style('display', 'block');\r\n        setUriLabel(d3.select('#inverse span'), l.valueFrom, l.uriFrom);\r\n      } else {\r\n        d3.select('#inverse').style('display', 'none');\r\n      }\r\n      if (l.cardTo !== undefined) {\r\n        d3.select('#minCardinality').style('display', 'block');\r\n        d3.select('#minCardinality span').text(l.cardTo);\r\n      } else {\r\n        d3.select('#minCardinality').style('display', 'none');\r\n      }\r\n      if (l.cardFrom !== undefined) {\r\n        d3.select('#maxCardinality').style('display', 'block');\r\n        d3.select('#maxCardinality span').text(l.cardFrom);\r\n      } else {\r\n        d3.select('#maxCardinality').style('display', 'none');\r\n      }\r\n\r\n      setUriLabel(d3.select('#domain'), l.source.name, l.source.uri);\r\n      setUriLabel(d3.select('#range'), l.target.name, l.target.uri);\r\n\r\n      focusOnElement(d3.select(this));\r\n    });\r\n  };\r\n\r\n  /* Highlights related subproperties if they are set */\r\n  var highlightSubproperties = function highlightSubpropertiesFunct(link, direction, classed) {\r\n    var subproperties = link.subpropertiesTo;\r\n\r\n    if (direction === 'from') {\r\n      subproperties = link.subpropertiesFrom;\r\n    }\r\n\r\n    if (subproperties === undefined) {\r\n      return;\r\n    }\r\n\r\n    subproperties.forEach(function(l) {\r\n      d3.select('#label' + l.id + (l.direction ? l.direction : 'to'))\r\n        .select('rect')\r\n        .classed('indirectHighlighting', classed);\r\n    });\r\n  };\r\n\r\n  var hideNodeInfoFields = function hideNodeInfoFieldsFunct() {\r\n    d3.select('#otherDetails').classed('hidden', false);\r\n    d3.select('#prop').classed('hidden', false);\r\n    d3.select('#class').classed('hidden', true);\r\n  };\r\n\r\n  var hideInfoField = function hideNodeInfoFieldsFunct() {\r\n    d3.select('#otherDetails').classed('hidden', true);\r\n  };\r\n  // eslint-disable-next-line\r\n  function refreshOntology(jsonFile) {\r\n    clearCanvas();\r\n    //jsonURI = jsonFile;\r\n    //loadGraph();\r\n  }\r\n\r\n  var clearCanvas = function clearCanvasFunct() {\r\n    var graphTag = document.getElementById('graph'),\r\n      svg = graphTag.getElementsByTagName('svg')[0];\r\n    d3.select(svg).remove();\r\n    //d3.select(reset).remove();\r\n    d3.selectAll('.slideOption > *').remove();\r\n    hideInfoField();\r\n    zoom.translate([0, 0]).scale(1);\r\n  };\r\n\r\n  var graphTag = document.getElementById('graph');\r\n  var height = window.innerHeight - 220;\r\n  var width = document.getElementById('example').offsetWidth;\r\n  json = data;\r\n  draw(graphTag, width, height);\r\n  setTimeout(window.centerGraph, 1000);\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport Refresh from '@material-ui/icons/Refresh';\r\nimport Close from '@material-ui/icons/Close';\r\nimport Palette from '@material-ui/icons/Palette';\r\nimport CloudDownload from '@material-ui/icons/CloudDownload';\r\nimport axios from 'axios';\r\nimport uuidv4 from 'uuid/v4';\r\nimport { getEndpointUrl, PREFIXES } from '../sparql';\r\nimport { getQueryCodeListInstances, getQueryClassInstanceCounts, getQueryCodeListStructure, getQueryVocabStats } from '../sparql';\r\nimport { getDBpediaQueryBroadestConcepts, getDBpediaQueryCodeListMembers, getDBpediaQueryCodeListStructure } from '../sparql';\r\nimport { getQueryCodeListConstruct, getDBpediaQueryCodeListConstruct } from '../sparql';\r\nimport { axiosConfig, fetchVocabs } from '../network';\r\nimport { createIriLink, createLink, downloadFile, shortenIri } from '../utils';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport CodeListsTable from './CodeListsTable';\r\nimport CodeListInstancesTable from './CodeListInstancesTable';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport VocabSelector from './VocabSelector';\r\nimport { drawGraph, parseToVOWLSpec } from './VOWL';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport { UnControlled as CodeMirror } from 'react-codemirror2';\r\n\r\nconst styles = theme => ({\r\n  paper: {\r\n    margin: 'auto',\r\n    position: 'relative',\r\n  },\r\n  searchBar: {\r\n    borderBottom: '1px solid rgba(0, 0, 0, 0.12)',\r\n  },\r\n  block: {\r\n    display: 'block',\r\n  },\r\n  codeBlock: {\r\n    padding: '10px',\r\n    width: 'calc(100% - 24px)',\r\n    margin: '10px auto',\r\n    fontWeight: 'bold',\r\n    backgroundColor: '#ddd',\r\n    height: 'auto',\r\n    border: 'none',\r\n    overflow: 'auto !important',\r\n  },\r\n  controls: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  },\r\n  dialogTitle: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  },\r\n  submitButtonContentWide: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: 160\r\n  },\r\n  submitButtonContent: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: 120,\r\n  },\r\n});\r\nclass CodeListsPage extends React.Component {\r\n  state = {\r\n    vocabsReady: true,\r\n    codeLists: {},\r\n    selectedVocabOption: null,\r\n    ontologyListLoading: false,\r\n    codeListsLoading: false,\r\n    codeListInstances: null,\r\n    codeList: null,\r\n    sparqlPreview: false,\r\n    codeListInstanceGraphNodes: null,\r\n    codeListInstancesGraphLoading: false,\r\n  }\r\n  componentWillMount = () => {\r\n    if (!window.cached.vocabs) {\r\n      this.setState({ ontologyListLoading: true });\r\n    }\r\n  }\r\n  onVocabSelected = (selectedVocabOption) => {\r\n    this.setState({ selectedVocabOption }, () => {\r\n      this.fetchCodeLists();\r\n    });\r\n  }\r\n  fetchCodeLists = () => {\r\n    const { selectedVocabOption } = this.state;\r\n    if (!selectedVocabOption) { return false; }\r\n    this.setState({ codeListsLoading: true });\r\n    let query = getQueryClassInstanceCounts(selectedVocabOption ? selectedVocabOption.value : '__YOUR_SELECTED_VOCAB__').trim();\r\n    let prefixes = PREFIXES;\r\n    if (selectedVocabOption.value === 'http://dbpedia.org') {\r\n      query = encodeURIComponent(getDBpediaQueryBroadestConcepts());\r\n      prefixes = '';\r\n    }\r\n    const payload = `query=${prefixes}${query}`;\r\n    return axios.post(getEndpointUrl(selectedVocabOption.value), payload, axiosConfig).then((resp) => {\r\n      const codeLists = {};\r\n      resp.data.results.bindings.filter((binding) => binding.ni.value > 0).forEach((binding) => {\r\n        const { d, p, c, ni } = binding;\r\n        const uuid = uuidv4();\r\n        const codeList = { d, p, c, ni };\r\n        codeList.i = 0;\r\n        codeLists[uuid] = codeList;\r\n      });\r\n      const uniqueCodeLists = {};\r\n      Object.keys(codeLists).forEach((key) => {\r\n        if (uniqueCodeLists[codeLists[key].c.value] && codeLists[key].p) {\r\n          uniqueCodeLists[codeLists[key].c.value].properties++;\r\n        } else {\r\n          uniqueCodeLists[codeLists[key].c.value] = { instances: parseFloat(codeLists[key].ni.value) || 0, properties: codeLists[key].p ? 1 : 0 };\r\n        }\r\n      });\r\n      window.cached.records[selectedVocabOption.value] = uniqueCodeLists;\r\n      this.setState({ codeLists, codeListsLoading: false });\r\n    });\r\n  }\r\n  showSparqlPreview = (queries) => () => {\r\n    this.setState({ sparqlPreview: queries });\r\n  }\r\n  showInstances = (key) => () => {\r\n    const { selectedVocabOption, codeLists } = this.state;\r\n    const { c } = codeLists[key];\r\n    let query = getQueryCodeListInstances(c.value, selectedVocabOption.value);\r\n    let prefixes = PREFIXES;\r\n    if (selectedVocabOption.value === 'http://dbpedia.org') {\r\n      prefixes = '';\r\n      query = encodeURIComponent(getDBpediaQueryCodeListMembers(c.value));\r\n    }\r\n    const payload = `query=${prefixes}${query}`;\r\n    this.setState({ codeListInstancesLoading: true });\r\n    return axios.post(getEndpointUrl(selectedVocabOption.value), payload, axiosConfig).then((resp) => {\r\n      this.setState({\r\n        codeListInstancesLoading: false,\r\n        codeListInstances: resp.data.results.bindings,\r\n        codeList: c,\r\n      });\r\n    });\r\n  }\r\n  closeSparqlModal = () => {\r\n    this.setState({ sparqlPreview: false });\r\n  }\r\n  closeInstancesModal = () => {\r\n    this.setState({ codeListInstances: null, codeList: null });\r\n  }\r\n  closeGraphModal = () => {\r\n    this.setState({ codeListInstanceGraphNodes: null });\r\n  }\r\n  handleDownloadCodeList = () => {\r\n    this.setState({ downloading: true });\r\n    const { selectedVocabOption, codeList } = this.state;\r\n    let fromVocab = selectedVocabOption.value;\r\n    let query = getQueryCodeListConstruct(codeList.value, fromVocab);\r\n    let prefixes = PREFIXES;\r\n    let ac = JSON.parse(JSON.stringify(axiosConfig));\r\n    ac.headers.accept = 'application/x-turtle,*/*;q=0.9';\r\n    if (selectedVocabOption.value === 'http://dbpedia.org') {\r\n      fromVocab = '';\r\n      prefixes = '';\r\n      query = encodeURIComponent(getDBpediaQueryCodeListConstruct(codeList.value));\r\n    }\r\n    const payload = `query=${prefixes}${query}`;\r\n    axios.post(getEndpointUrl(selectedVocabOption.value), payload, ac).then((resp) => {\r\n      let fileName = shortenIri(codeList.value);\r\n      if (fileName.startsWith('http') && fileName.includes('/')) {\r\n        fileName = fileName.split('/').slice(-1);\r\n      } else {\r\n        fileName = fileName.replace(/[:/]/g, '-');\r\n      }\r\n      downloadFile(`${fileName}.ttl`, resp.data, 'turtle');\r\n      this.setState({ downloading: false });\r\n    });\r\n  }\r\n  handleLoadGraph = () => {\r\n    const { selectedVocabOption, codeList } = this.state;\r\n    let fromVocab = selectedVocabOption.value;\r\n    let query = getQueryCodeListStructure(codeList.value, fromVocab);\r\n    let prefixes = PREFIXES;\r\n    if (selectedVocabOption.value === 'http://dbpedia.org') {\r\n      fromVocab = '';\r\n      prefixes = '';\r\n      query = encodeURIComponent(getDBpediaQueryCodeListStructure(codeList.value));\r\n    }\r\n    this.setState({ codeListInstancesGraphLoading: true });\r\n    const payload = `query=${prefixes}${query}`;\r\n    return axios.post(getEndpointUrl(selectedVocabOption.value), payload, axiosConfig).then((resp) => {\r\n      const data = parseToVOWLSpec(resp.data.results.bindings);\r\n      this.setState({ codeListInstancesGraphLoading: false, codeListInstanceGraphNodes: data }, () => {\r\n        setTimeout(() => {\r\n          drawGraph(data);\r\n        }, 1000)\r\n      });\r\n    });\r\n  };\r\n  showCodeListSparqlPreview = () => {\r\n    const { selectedVocabOption } = this.state\r\n    this.showSparqlPreview(\r\n      selectedVocabOption ?\r\n        (selectedVocabOption.value === 'http://dbpedia.org' ?\r\n          [{ name: 'Query for listing code lists', query: getDBpediaQueryBroadestConcepts().trim() }] :\r\n          [{ name: 'Query for listing code lists', query: getQueryClassInstanceCounts(selectedVocabOption.value || '__YOUR_SELECTED_VOCAB__').trim() }]) : ''\r\n    )();\r\n  };\r\n  remountVocabSelector = () => {\r\n    this.setState({ ontologyListLoading: true, vocabsReady: false });\r\n    fetchVocabs(true).then(() => {\r\n      this.setState({ ontologyListLoading: false, vocabsReady: true });\r\n    });\r\n  };\r\n  render = () => {\r\n    const { selectedVocabOption, codeListsLoading, ontologyListLoading, codeLists, codeList, codeListInstances, vocabsReady, downloading } = this.state\r\n    const { codeListInstancesLoading, codeListInstancesGraphLoading, codeListInstanceGraphNodes, sparqlPreview } = this.state;\r\n    const { classes } = this.props;\r\n    return (\r\n      <>\r\n        <div className={classes.controls}>\r\n          <Typography align=\"left\" variant=\"h5\">\r\n            Browse code lists\r\n          </Typography>\r\n          <div>\r\n            <Button color=\"primary\" onClick={this.showSparqlPreview(\r\n              [{ name: 'Query to list ontologies with number of classes and number of class instances', query: getQueryVocabStats().trim() }]\r\n            )}><Visibility />&nbsp;View SPARQL</Button>\r\n            <Button color=\"primary\" onClick={this.remountVocabSelector}>\r\n              <div className={classes.submitButtonContentWide}>\r\n                {ontologyListLoading ? <CircularProgress size={20} /> : <Refresh style={{ fontSize: 20 }} />}&nbsp;{ontologyListLoading ? 'Loading list...' : 'Reload ontology list'}\r\n              </div>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <Typography align=\"left\" variant=\"subtitle2\">\r\n          This tool will help you identify code lists embedded in a knowledge graph or vocabulary. Please start by selecting an item below.\r\n        </Typography>\r\n        <Paper className={classes.paper}>\r\n          {vocabsReady && <VocabSelector\r\n            onVocabSelected={this.onVocabSelected}\r\n            onReloadClick={this.fetchCodeLists}\r\n            loading={codeListsLoading}\r\n            onShowSparql={this.showCodeListSparqlPreview}\r\n            onLoad={() => this.setState({ ontologyListLoading: false, vocabsReady: true })}\r\n          />}\r\n          <Paper className={classes.root}>\r\n            <CodeListsTable\r\n              loading={codeListsLoading}\r\n              codeLists={codeLists}\r\n              showInstances={this.showInstances}\r\n              vocabIsSelected={selectedVocabOption ? true : false}\r\n            />\r\n          </Paper>\r\n        </Paper>\r\n        <Dialog onClose={this.closeInstancesModal} open={codeListInstances || codeListInstancesLoading ? true : false} fullWidth={true} maxWidth=\"xl\">\r\n          <DialogTitle>\r\n            <div className={classes.dialogTitle}>\r\n              <span>Vocabulary: {selectedVocabOption && createIriLink(selectedVocabOption.value)}</span>\r\n              {codeList && (\r\n                <span style={{ minWidth: 412 }}>\r\n                  <Button color=\"primary\" disabled={downloading} onClick={this.handleDownloadCodeList}>\r\n                    Download RDF&nbsp;{downloading ? <CircularProgress size={20} /> : <CloudDownload />}\r\n                  </Button>\r\n                  <Button color=\"primary\" onClick={this.handleLoadGraph}>Visualize&nbsp;<Palette /></Button>\r\n                  <Button color=\"primary\" onClick={\r\n                    this.showSparqlPreview([\r\n                      { name: 'Query for listing members', query: getQueryCodeListInstances(codeList.value, selectedVocabOption.value).trim() },\r\n                      { name: 'Query for visualization', query: getQueryCodeListStructure(codeList.value, selectedVocabOption.value).trim() },\r\n                      { name: 'Query for download', query: getQueryCodeListConstruct(codeList.value, selectedVocabOption.value).trim() }\r\n                    ])\r\n                  }>View SPARQL&nbsp;<Visibility /></Button>\r\n                  <Button color=\"primary\" onClick={this.closeInstancesModal}><Close /></Button>\r\n                </span>\r\n              )}\r\n            </div>\r\n            <div className={classes.dialogTitle}>\r\n              <span>Code list: {codeList && createIriLink(codeList.value)}</span>\r\n            </div>\r\n          </DialogTitle>\r\n          <CodeListInstancesTable loading={codeListInstancesLoading} codeListInstances={codeListInstances} codeList={codeList} />\r\n        </Dialog>\r\n        <Dialog onClose={this.closeGraphModal} open={codeListInstanceGraphNodes || codeListInstancesGraphLoading ? true : false} fullWidth={true} maxWidth=\"xl\">\r\n          <DialogTitle>\r\n            <div className={classes.dialogTitle}>\r\n              <div>Code list view (showing max 100 nodes)</div>\r\n              {codeList && (\r\n                <div>\r\n                  {createIriLink(codeList.value)}\r\n                  <Button color=\"primary\" onClick={this.closeGraphModal}><Close /></Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </DialogTitle>\r\n          {codeListInstancesGraphLoading && <div style={{ display: 'flex', justifyContent: 'center' }}><CircularProgress size={40} /></div>}\r\n          <div className=\"ontology-graph\">\r\n            <div id=\"example\">\r\n              <div id=\"control\">\r\n                <div className=\"slider-container\">\r\n                  {!codeListInstancesGraphLoading && <label>Distance</label>}\r\n                  <div id=\"sliderOption\" />\r\n                </div>\r\n                <div id=\"resetOption\" />\r\n              </div>\r\n              <div id=\"graph\" />\r\n            </div>\r\n          </div>\r\n        </Dialog>\r\n        <Dialog onClose={this.closeSparqlModal} open={sparqlPreview ? true : false} fullWidth={true} maxWidth=\"md\">\r\n          <DialogTitle>\r\n            <div className={classes.dialogTitle}>\r\n              <span>SPARQL query preview</span>\r\n              <Button color=\"primary\" onClick={this.closeSparqlModal}><Close /></Button>\r\n            </div>\r\n            <Typography variant=\"body2\">See also {createLink('https://github.com/nvbach91/iga-hybrid')}</Typography>\r\n            <Typography variant=\"body2\">\r\n              Endpoint {selectedVocabOption ?\r\n                createLink(getEndpointUrl(selectedVocabOption.value)) :\r\n                <>{createLink(getEndpointUrl())} {/*createLink(getEndpointUrl('https://fcp.vse.cz/blazegraphpublic/namespace/biomed'))*/}</>\r\n              }\r\n            </Typography>\r\n          </DialogTitle>\r\n          {sparqlPreview ? sparqlPreview.map((preview, index) => {\r\n            return (\r\n              <div className=\"code-mirror-container\" key={index}>\r\n                <Typography variant=\"subtitle2\" style={{ textIndent: 34, marginTop: 20, backgroundColor: '#ccc' }}>{preview.name}</Typography>\r\n                <CodeMirror value={preview.query} options={{\r\n                  mode: 'sparql',\r\n                  //theme: 'material',\r\n                  lineNumbers: true,\r\n                  readOnly: true,\r\n                }} />\r\n              </div>\r\n            );\r\n          }) : <div />}\r\n        </Dialog>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nCodeListsPage.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(CodeListsPage);\r\n","import React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { createIriLink, createLink } from '../utils';\r\nimport VirtualizedTable from './VirtualizedTable'\r\n\r\nexport default function PrefixesTable({ rows }) {\r\n  const mRows = rows.map((prefix) => {\r\n    const iri = window.cached.prefixes[prefix];\r\n    if (window.cached.renderedPrefixes[prefix]) {\r\n      return window.cached.renderedPrefixes[prefix];\r\n    } else {\r\n      const renderedPrefix = { id: prefix, prefix: createIriLink(iri), iri: createLink(iri) };\r\n      window.cached.renderedPrefixes[prefix] = renderedPrefix;\r\n      return renderedPrefix;\r\n    }\r\n  })\r\n  return (\r\n    <Paper style={{ height: 400, width: '100%' }}>\r\n      <VirtualizedTable\r\n        rowCount={mRows.length}\r\n        rowGetter={({ index }) => mRows[index]}\r\n        columns={[\r\n          {\r\n            width: 200,\r\n            label: 'Prefix',\r\n            dataKey: 'prefix',\r\n          },\r\n          {\r\n            flexGrow: 1,\r\n            width: 0,\r\n            label: 'IRI',\r\n            dataKey: 'iri',\r\n          },\r\n        ]}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport PrefixesTable from './PrefixesTable';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { createLink, debounce } from '../utils';\r\n\r\nconst styles = theme => ({\r\n  paper: {\r\n    margin: 'auto',\r\n    position: 'relative',\r\n  },\r\n  searchBar: {\r\n    borderBottom: '1px solid rgba(0, 0, 0, 0.12)',\r\n  },\r\n  block: {\r\n    display: 'block',\r\n  },\r\n  formControl: {\r\n    flexGrow: 1\r\n  },\r\n});\r\nclass PrefixesPage extends React.Component {\r\n  state = {\r\n    searchValue: '',\r\n    rows: Object.keys(window.cached.prefixes),\r\n  }\r\n  updateList = debounce(() => {\r\n    this.setState({\r\n      rows: Object.keys(window.cached.prefixes).filter((prefix) => {\r\n        const v = this.state.searchValue.trim().toLowerCase();\r\n        return (\r\n          prefix.toLowerCase().includes(v) ||\r\n          window.cached.prefixes[prefix].toLowerCase().includes(v)\r\n        );\r\n      })\r\n    })\r\n  }, 500)\r\n  handleInputChange = (e) => {\r\n    this.setState({ searchValue: e.target.value }, this.updateList);\r\n  }\r\n  render = () => {\r\n    const { classes } = this.props;\r\n    return (\r\n      <>\r\n      <Typography align=\"left\" variant=\"h5\">\r\n        Search for prefixes\r\n      </Typography>\r\n      <Typography align=\"left\" variant=\"subtitle2\">\r\n        All prefixes used in this application come from {createLink('https://prefix.cc/context')}\r\n      </Typography>\r\n        <Paper className={classes.paper}>\r\n          <AppBar className={classes.searchBar} position=\"static\" color=\"default\" elevation={0}>\r\n            <Toolbar>\r\n              <Grid container spacing={2} alignItems=\"center\">\r\n                <Grid item>\r\n                  <SearchIcon className={classes.block} color=\"inherit\" />\r\n                </Grid>\r\n                <FormControl className={classes.formControl}>\r\n                  <TextField value={this.state.searchValue} onChange={this.handleInputChange} />\r\n                </FormControl>\r\n              </Grid>\r\n            </Toolbar>\r\n          </AppBar>\r\n          <Paper className={classes.root}>\r\n            <PrefixesTable rows={this.state.rows}/>\r\n          </Paper>\r\n        </Paper>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nPrefixesPage.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(PrefixesPage);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst lightColor = 'rgba(255, 255, 255, 0.7)';\r\n\r\nconst styles = theme => ({\r\n  secondaryBar: {\r\n    zIndex: 0,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -theme.spacing(1),\r\n  },\r\n  iconButtonAvatar: {\r\n    padding: 4,\r\n  },\r\n  link: {\r\n    textDecoration: 'none',\r\n    color: lightColor,\r\n    '&:hover': {\r\n      color: theme.palette.common.white,\r\n    },\r\n  },\r\n  button: {\r\n    borderColor: lightColor,\r\n  },\r\n});\r\n\r\nfunction Header(props) {\r\n  const { classes, onDrawerToggle, onTabSwitch, tabIndex } = props;\r\n\r\n  return (\r\n    <>\r\n      <AppBar color=\"primary\" position=\"sticky\" elevation={0}>\r\n        <Toolbar>\r\n          <Grid container spacing={1} alignItems=\"center\">\r\n            <Hidden smUp>\r\n              <Grid item>\r\n                <IconButton color=\"inherit\" aria-label=\"Open drawer\" onClick={onDrawerToggle} className={classes.menuButton}>\r\n                  <MenuIcon />\r\n                </IconButton>\r\n              </Grid>\r\n            </Hidden>\r\n            <Grid item xs />\r\n            <Grid item>\r\n              <Tooltip title=\"Alerts • No alters\">\r\n                <IconButton color=\"inherit\">\r\n                  <NotificationsIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </Grid>\r\n            <Grid item>\r\n              <IconButton color=\"inherit\" className={classes.iconButtonAvatar}>\r\n                <Avatar\r\n                  className={classes.avatar}\r\n                  src=\"favicon.png\"\r\n                  alt=\"avatar\"\r\n                />\r\n              </IconButton>\r\n            </Grid>\r\n          </Grid>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <AppBar\r\n        component=\"div\"\r\n        className={classes.secondaryBar}\r\n        color=\"primary\"\r\n        position=\"static\"\r\n        elevation={0}\r\n      >\r\n        <Toolbar>\r\n          <Grid container alignItems=\"center\" spacing={1}>\r\n            <Grid item xs>\r\n              <Typography color=\"inherit\" variant=\"h5\" component=\"h1\">\r\n                Code List Analyzer\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <Tooltip title=\"Help\">\r\n                <IconButton color=\"inherit\">\r\n                  <HelpIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </Grid>\r\n          </Grid>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <AppBar\r\n        component=\"div\"\r\n        className={classes.secondaryBar}\r\n        color=\"primary\"\r\n        position=\"static\"\r\n        elevation={0}\r\n      >\r\n        <Tabs value={tabIndex} textColor=\"inherit\">\r\n          <Tab textColor=\"inherit\" label=\"Code lists\" onClick={onTabSwitch(0)}/>\r\n          <Tab textColor=\"inherit\" label=\"Class Fragments\" onClick={onTabSwitch(1)}/>\r\n          <Tab textColor=\"inherit\" label=\"Prefixes\" onClick={onTabSwitch(2)}/>\r\n        </Tabs>\r\n      </AppBar>\r\n    </>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  onDrawerToggle: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Header);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { createMuiTheme, withStyles } from '@material-ui/core/styles';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Navigator from './Navigator';\r\nimport ClassFragmentsPage from './ClassFragmentsPage';\r\nimport CodeListsPage from './CodeListsPage';\r\nimport PrefixesPage from './PrefixesPage';\r\nimport Header from './Header';\r\n\r\nlet theme = createMuiTheme({\r\n  typography: {\r\n    h5: {\r\n      fontWeight: 500,\r\n      fontSize: 26,\r\n      letterSpacing: 0.5,\r\n    },\r\n  },\r\n  palette: {\r\n    primary: {\r\n      light: '#63ccff',\r\n      main: '#009be5',\r\n      dark: '#006db3',\r\n    },\r\n  },\r\n  shape: {\r\n    borderRadius: 8,\r\n  },\r\n});\r\n\r\ntheme = {\r\n  ...theme,\r\n  overrides: {\r\n    MuiDrawer: {\r\n      paper: {\r\n        backgroundColor: '#18202c',\r\n      },\r\n    },\r\n    MuiButton: {\r\n      label: {\r\n        textTransform: 'none',\r\n      },\r\n      contained: {\r\n        boxShadow: 'none',\r\n        '&:active': {\r\n          boxShadow: 'none',\r\n        },\r\n      },\r\n    },\r\n    MuiTabs: {\r\n      root: {\r\n        marginLeft: theme.spacing(1),\r\n      },\r\n      indicator: {\r\n        height: 3,\r\n        borderTopLeftRadius: 3,\r\n        borderTopRightRadius: 3,\r\n        backgroundColor: theme.palette.common.white,\r\n      },\r\n    },\r\n    MuiTab: {\r\n      root: {\r\n        textTransform: 'none',\r\n        margin: '0 16px',\r\n        minWidth: 0,\r\n        padding: 0,\r\n        [theme.breakpoints.up('md')]: {\r\n          padding: 0,\r\n          minWidth: 0,\r\n        },\r\n      },\r\n    },\r\n    MuiIconButton: {\r\n      root: {\r\n        padding: theme.spacing(1),\r\n      },\r\n    },\r\n    MuiTooltip: {\r\n      tooltip: {\r\n        borderRadius: 4,\r\n      },\r\n    },\r\n    MuiDivider: {\r\n      root: {\r\n        backgroundColor: '#404854',\r\n      },\r\n    },\r\n    MuiListItemText: {\r\n      primary: {\r\n        fontWeight: theme.typography.fontWeightMedium,\r\n      },\r\n    },\r\n    MuiListItemIcon: {\r\n      root: {\r\n        color: 'inherit',\r\n        marginRight: 0,\r\n        '& svg': {\r\n          fontSize: 20,\r\n        },\r\n      },\r\n    },\r\n    MuiAvatar: {\r\n      root: {\r\n        width: 32,\r\n        height: 32,\r\n      },\r\n    },\r\n  },\r\n  props: {\r\n    MuiTab: {\r\n      disableRipple: true,\r\n    },\r\n  },\r\n  mixins: {\r\n    ...theme.mixins,\r\n    toolbar: {\r\n      minHeight: 48,\r\n    },\r\n  },\r\n};\r\n\r\nconst drawerWidth = 192;\r\n\r\nconst styles = {\r\n  root: {\r\n    display: 'flex',\r\n    minHeight: '100vh',\r\n  },\r\n  drawer: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n  },\r\n  appPage: {\r\n    flex: 1,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  mainPage: {\r\n    flex: 1,\r\n    padding: '48px 36px 0',\r\n    background: '#eaeff1',\r\n  },\r\n};\r\n\r\nclass Paperbase extends React.Component {\r\n  state = {\r\n    mobileOpen: false,\r\n    tabIndex: 0,\r\n  };\r\n\r\n  handleDrawerToggle = () => {\r\n    this.setState(state => ({ mobileOpen: !state.mobileOpen }));\r\n  };\r\n  handleTabSwitch = (tabIndex) => () => {\r\n    this.setState({ tabIndex });\r\n  }\r\n  renderPage = () => {\r\n    switch (this.state.tabIndex) {\r\n      case 0: return <CodeListsPage />;\r\n      case 1: return <ClassFragmentsPage />;\r\n      case 2: return <PrefixesPage />;\r\n      default: return <ClassFragmentsPage />;\r\n    }\r\n  }\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <ThemeProvider theme={theme}>\r\n        <div className={classes.root}>\r\n          <CssBaseline />\r\n          <nav className={classes.drawer}>\r\n            <Hidden smUp implementation=\"js\">\r\n              <Navigator\r\n                PaperProps={{ style: { width: drawerWidth } }}\r\n                variant=\"temporary\"\r\n                open={this.state.mobileOpen}\r\n                onClose={this.handleDrawerToggle}\r\n              />\r\n            </Hidden>\r\n            <Hidden xsDown implementation=\"css\">\r\n              <Navigator PaperProps={{ style: { width: drawerWidth } }} />\r\n            </Hidden>\r\n          </nav>\r\n          <div className={classes.appPage}>\r\n            <Header onDrawerToggle={this.handleDrawerToggle} onTabSwitch={this.handleTabSwitch} tabIndex={this.state.tabIndex}/>\r\n            <main className={classes.mainPage}>\r\n              {this.renderPage()}\r\n            </main>\r\n          </div>\r\n        </div>\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n}\r\n\r\nPaperbase.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Paperbase);","import React from 'react';\r\nimport Paperbase from './Paperbase';\r\nimport '../css/App.css';\r\nimport '../css/VOWL.css';\r\nimport 'codemirror/lib/codemirror.css';\r\n//import 'codemirror/theme/material.css';\r\nimport axios from 'axios';\r\nrequire('codemirror/mode/sparql/sparql');\r\n\r\nclass App extends React.Component {\r\n  componentWillMount = () => {\r\n    window.cached.renderedPrefixes = {};\r\n    window.cached.records = {};\r\n    window.cached.prefixes = {};\r\n    window.cached.reversePrefixes = {};\r\n\r\n    axios.get('https://prefix.cc/context').then((resp) => {\r\n      window.cached.prefixes = resp.data['@context'];\r\n      // additional prefixes\r\n      window.cached.prefixes['lm-voag'] = 'http://voag.linkedmodel.org/voag#';\r\n      window.cached.prefixes['ce'] = 'http://www.ebusiness-unibw.org/ontologies/consumerelectronics/v1#';\r\n      window.cached.prefixes['rcc'] = 'http://web.resource.org/cc/';\r\n      window.cached.prefixes['co-bbc'] = 'http://www.bbc.co.uk/ontologies/bbc/';\r\n      window.cached.prefixes['gleif-base'] = 'https://www.gleif.org/ontology/Base/';\r\n      window.cached.prefixes['gleif-l1'] = 'https://www.gleif.org/ontology/L1/';\r\n      window.cached.prefixes['gleif-l2'] = 'https://www.gleif.org/ontology/L2/';\r\n      window.cached.prefixes['gleif-re'] = 'https://www.gleif.org/ontology/ReportingException/';\r\n      window.cached.prefixes['gleif-gc'] = 'https://www.gleif.org/ontology/Geocoding/';\r\n      window.cached.prefixes['cubes'] = 'http://purl.org/qb4olap/cubes#';\r\n      window.cached.prefixes['squdt'] = 'http://qudt.org/schema/qudt/';\r\n      window.cached.prefixes['dkdk'] = 'http://www.data-knowledge.org/dk/';\r\n      window.cached.prefixes['kanzaki'] = 'http://www.kanzaki.com/ns/music#';\r\n      Object.keys(window.cached.prefixes).forEach((prefix) => {\r\n        window.cached.reversePrefixes[window.cached.prefixes[prefix]] = prefix;\r\n      });\r\n    });\r\n  }\r\n  render = () => (\r\n    <div className=\"App\">\r\n      <Paperbase />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './css//index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nwindow.cached = {};\r\nconst cachedVocabs = localStorage.getItem('cached.vocabs');\r\nconst cachedVocabsDate = localStorage.getItem('cached.vocabs.date');\r\nif (cachedVocabs && cachedVocabsDate) {\r\n    if (new Date() - new Date(cachedVocabsDate) < 2*24*60*60*1000) { // 2 days of caching\r\n        try {\r\n            window.cached.vocabs = JSON.parse(cachedVocabs);\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n}\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}